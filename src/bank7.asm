; C000 - bank 7
.byte $5C, $C0, $00, $00, $00, $00, $00, $00, $65, $C0, $00, $00, $00, $00, $00, $00
.byte $7D, $C0, $8D, $C0, $A9, $C0, $CD, $C0, $E1, $C0, $F9, $C0, $1F, $C1, $00, $00
.byte $02, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $02, $00
.byte $00, $00, $00, $00, $01, $00, $01, $00, $01, $00, $01, $00, $60, $C0, $64, $C0
.byte $00, $00, $00, $00, $71, $C0, $00, $00, $00, $00, $00, $00, $85, $C0, $9B, $C0
.byte $BB, $C0, $D7, $C0, $ED, $C0, $0C, $C1, $22, $C1, $26, $C1, $00, $04, $08, $0C
.byte $00, $01, $21, $21, $02, $10, $14, $18, $1C, $00, $00, $00, $00, $00, $00, $00
.byte $20, $05, $05, $06, $06, $00, $00, $00, $00, $00, $00, $00, $06, $00, $04, $08
.byte $0C, $10, $14, $18, $1C, $08, $08, $08, $08, $07, $07, $07, $07, $00, $00, $34
.byte $38, $24, $28, $00, $00, $24, $28, $2C, $30, $24, $28, $00, $09, $09, $09, $09
.byte $09, $00, $00, $09, $09, $09, $09, $09, $09, $00, $00, $00, $50, $3C, $40, $00
.byte $00, $00, $44, $48, $4C, $00, $00, $00, $00, $3C, $40, $00, $00, $0C, $0C, $0C
.byte $0C, $00, $00, $0C, $0C, $0C, $0C, $0C, $00, $00, $00, $0C, $0C, $04, $0C, $00
.byte $00, $00, $00, $00, $00, $00, $08, $0E, $0E, $00, $00, $00, $00, $00, $00, $0E
.byte $0E, $10, $14, $18, $1C, $10, $14, $00, $00, $00, $00, $00, $20, $0F, $0F, $0F
.byte $0F, $0F, $0F, $00, $00, $00, $00, $0F, $0F, $24, $28, $38, $00, $00, $00, $00


; C100 - bank 7
.byte $00, $30, $2C, $3C, $00, $00, $00, $00, $00, $00, $34, $40, $10, $10, $10, $00
.byte $00, $00, $00, $00, $10, $10, $10, $00, $00, $00, $00, $00, $00, $10, $10, $44
.byte $48, $4C, $11, $12, $12, $12, $14, $2B, $2B, $2B, $2B, $2B, $2B, $2A, $2A, $2A
.byte $2A, $2A, $2A, $2A, $2A, $29, $29, $29, $29, $29, $29, $29, $29, $28, $28, $28
.byte $28, $28, $28, $28, $28, $23, $23, $23, $23, $23, $23, $22, $22, $22, $22, $22
.byte $22, $22, $22, $21, $21, $21, $21, $21, $21, $21, $21, $20, $20, $20, $20, $20
.byte $20, $20, $20, $A0, $80, $60, $40, $20, $00, $E0, $C0, $A0, $80, $60, $40, $20
.byte $00, $E0, $C0, $A0, $80, $60, $40, $20, $00, $E0, $C0, $A0, $80, $60, $40, $20
.byte $00, $A0, $80, $60, $40, $20, $00, $E0, $C0, $A0, $80, $60, $40, $20, $00, $E0
.byte $C0, $A0, $80, $60, $40, $20, $00, $E0, $C0, $A0, $80, $60, $40, $20, $00, $78
.byte $70, $70, $68, $68, $60, $60, $58, $58, $50, $50, $48, $48, $40, $40, $38, $30
.byte $30, $28, $28, $20, $20, $18, $18, $10, $10, $08, $08, $00, $00, $70, $61, $60
.byte $51, $50, $41, $40, $31, $30, $21, $20, $11, $10, $01, $00, $00, $2B, $23, $00
.byte $80, $40, $00, $00, $00, $00, $00, $01, $01, $01, $01, $01, $01, $01, $01, $01
.byte $01, $01, $01, $38, $1A, $39, $1B, $3A, $1C, $3B, $1D, $3C, $1E, $5B, $3D, $5C
.byte $3E, $5D, $3F, $5E, $40, $5F, $41, $2B, $23, $2B, $23, $2B, $23, $2B, $23, $2B


; C200 - bank 7
.byte $23, $A0, $A0, $80, $80, $60, $60, $40, $40, $20, $20, $00, $00, $20, $24, $28
.byte $2C, $30, $44, $44, $60, $60, $60, $60, $60, $60, $60, $34, $38, $3C, $40, $44
.byte $48, $4C, $50, $54, $58, $5C, $16, $17, $17, $17, $17, $18, $18, $1B, $1B, $1B
.byte $1B, $1B, $1B, $1B, $02, $14, $15, $18, $18, $1B, $1B, $1B, $1B, $1B, $1B, $1B
.byte $02, $02, $02, $02, $02, $02, $02, $02, $02, $02, $02, $02, $02, $02, $02, $02
.byte $02, $02, $02, $02, $02, $02, $02, $02, $02, $02, $85, $16, $A8, $B9, $0D, $C2
.byte $AA, $B9, $26, $C2, $8D, $F4, $04, $B9, $40, $C2, $20, $EE, $FE, $C0, $10, $D0
.byte $05, $A9, $1E, $20, $76, $FE

; start the tile and attribute loading code
; get the address of the data to write
; VM data is:
; VMADDH, VMADDL, V or H write
; [repeated] times to repeat entry, values in entry, entry values
; 00 00 00 00
  jslb write_tile_and_attribute_rewrite, $a0
  LDA ATTR_NES_HAS_VALUES
  BEQ :+
  jslb convert_nes_attributes_and_immediately_dma_them, $a0
: nops 28
;   LDA $8000,X
;   STA $21
;   LDA $8001,X
;   STA $22
; @c280:
;   LDY #$00
;   LDA ($21),Y
;   CMP #$00
;   BNE @c2c8
;   INY
;   LDA ($21),Y
;   CMP #$00
;   BNE @c2a5
;   LDA $16
;   CMP #$05
;   BMI :+
;   CMP #$0D
;   BPL :+
;   CLC
;   ADC #$0C
;   JMP @c2a5
;:
; done, bank switch back to bank 6, and go to FEEE
  LDA #$06
  JSR $FEEE
  RTS


; c2a5
@c2a5:
  jsr @store_vm_add_h_to_range ; STA VMADDH ; PpuAddr_2006
  INY
  LDA ($21),Y
  STA VMADDL ; PpuAddr_2006
  INY
  LDA ($21),Y
  ASL A
  ASL A
  STA $15
  
; set VM Write Increment to 1
;   LDA $FF
;   AND #$FB
;   ORA $15
;   STA $FF
;   STA PpuControl_2000
  jslb set_vram_increment_based_on_a_and_store, $a0
  nops 7

  LDA #$04
  JSR $c2ec
  JMP $c280
@c2c8:
  STA $05
  INY
  LDA ($21),Y
  STA $08
  LDA #$02
  JSR $c2ec
: LDY #$00
: LDA ($21),Y
  STA VMDATAL ; PpuData_2007
  INY
  CPY $08
  BNE :-
  DEC $05
  BNE :--
  LDA $08
  JSR $c2ec
  JMP $c280
  
@c2ec:
  CLC
  ADC $21
  STA $21
  LDA $22
  ADC #$00
  STA $22
  RTS

.byte $00, $0E, $00, $00, $00, $00, $00, $00


; C300 - bank 7
.byte $00, $00, $00, $00, $00, $00, $00, $0F, $10

  LDA #$00
  STA $051D
  LDY #$80
  LDX #$30
: LDA $0464,Y
  STA $0628,X
  STA $0668,X
  INX
  INY
  CPX #$40
  BNE :-


; C321
  LDA #$2B
  LDX #$02
  jsr @store_vm_add_h_to_range ; STA VMADDH ; PpuAddr_2006
  LDA #$40
  STA VMADDL ; PpuAddr_2006
  LDY #$00
: LDA $0464,Y
  STA VMDATAL ; PpuData_2007
  INY
  CPY #$80
  BNE :-

.byte $A9, $23, $CA, $D0, $E6, $A5
.byte $3D, $0A, $0A, $05, $3E, $A8, $B9, $F8, $C2, $F0, $56, $20, $5A, $C2
  
  ; these next two bits are updating the colors in the HUD.  It's not critcal,
  ; and actually seems pretty bugged in the original game, since it updates it but
  ; doesn't use it.
  LDA #$23
  STA VMADDH ; $2006
  LDA #$F0
  STA VMADDL ; $2006
  LDX #$30
  LDY #$00
  LDA VMDATALREAD ;  $2007

.byte $29
.byte $0F, $85, $15, $B9, $E4, $04, $29, $F0, $05, $15, $9D, $28, $06, $E8, $C8, $C0
.byte $08, $D0, $00, $B9, $E4, $04, $9D, $28, $06, $C8, $E8, $C0, $10, $D0, $F4

  LDA #$23
  STA VMADDL ; $2006
  LDA #$F0
  STA VMADDH ; $2006
  LDY #$30
: LDA $0628,Y
  STA VMDATAL ; $2007
  INY
  CPY #$40
  BNE :-

.byte $A9, $06, $20, $EE, $FE, $A9, $00, $20, $F5, $C7
.byte $60, $20, $91, $C9, $A0, $00, $B9, $DB, $00, $99, $DF, $00, $99, $1C, $00, $C8
.byte $C0, $04, $D0, $F2, $A5, $1E, $18, $69, $28, $85, $1E, $A5, $1F, $69, $00, $85
.byte $1F

; sets increment to 1 and stores
;   LDA $FF
;   AND #$FB
;   STA $FF
;   STA PpuControl_2000
jslb set_vram_increment_to_1_and_store, $a0
nops 5

.byte $20, $D1, $C9, $A9, $1A, $85
.byte $05, $20, $46, $C4, $A9, $21, $85, $08, $B1, $21
 
  STA VMDATAL ; PpuData_2007


.byte $C6, $08, $F0
.byte $14, $20, $73, $CA, $C8, $C0, $20, $D0, $EF, $E6, $1D, $A9, $00, $85, $1C, $20
.byte $51, $C4, $4C, $D8, $C3, $E6, $1E, $A9, $1E, $C5, $1E, $D0, $02, $E6, $1F, $E6


; C400 - bank 7
.byte $20, $A9, $3C, $C5, $20, $D0, $04, $A9, $00, $85, $20, $C6, $05, $D0, $C2


; loads 0x80 bytes to attributes
; basically a full attribute copy 
; from $0628,Y

  jslb full_attribute_copy_from_0628, $a0
  nops 34

;   LDA #$23
;   STA VMADDH
;   LDY #$00
;   LDA #$C0
;   STA VMADDL
;   LDA $0628,Y
;   STA VMDATAL
;   INY
;   CPY #$80
;   BEQ :++
;   CPY #$40
;   BEQ :+
;   JMP $C41B

; ; C42d
; : LDA #$2B
;   jsr @store_vm_add_h_to_range ; STA PpuAddr_2006
;   JMP $C416
; :
  JSR $CB2F
  JSR $CFA1
  LDA #$00
  JSR $C7F5
  LDA #$06
  JSR $FEEE
  RTS


; C446
  LDA $DB
  LSR A
  LSR A
  LSR A
  STA $1C
  LDA $DC
  STA $1D
  JSR $CA03
  LDA $01
  jsr @store_vm_add_h_to_range ; STA VMADDH ; PpuAddr_2006
  LDA $00
  STA VMADDL ; PpuAddr_2006
  LDY $1C
  RTS

.byte $A9, $04, $C5, $3D, $D0, $0A, $A9, $03, $05, $3B, $85, $3B, $20, $E4, $C6
.byte $60, $20, $91, $C9, $A5, $15, $48, $A5, $DF, $38, $E5, $DB, $D0, $03, $4C, $2B
.byte $C5, $30, $39, $A5, $DF, $29, $0F, $C9, $05, $30, $68, $85, $15, $A5, $DB, $29
.byte $0F, $C9, $05, $30, $04, $C5, $15, $30, $5A, $A5, $DF, $A6, $E0, $85, $1C, $86
.byte $1D, $18, $A5, $E1, $69, $28, $85, $1E, $A5, $E2, $69, $00, $85, $1F, $20, $10
.byte $C9, $A5, $3B, $29, $1F, $09, $80, $85, $3B, $4C, $F3, $C4

; checking for scrolling
; and triggers tile / attribute writes
  LDA $DB
  AND #$0F
  CMP #$05
  BMI @nes_C4F3
  STA $15
  LDA $DF
  AND #$0F
  CMP #$05
  BMI :+
  CMP $15
  BMI @nes_C4F3
: 
  LDA $DF
  LDX $E0
  INX
  STA $1C
  STX $1D
  CLC
  LDA $E1
  ADC #$28
  STA $1E
  LDA $E2
  ADC #$00
  STA $1F
  ; write attributes for scrolling
  JSR $C910
  LDA $3B
  AND #$1F
  ORA #$80
  STA $3B
@nes_C4F3:
  CLC


.byte $A5, $E1, $69, $E8, $85, $1E, $A5, $E2, $69, $00, $85, $1F


; C500 - bank 7
.byte $A5, $DB, $29, $F8, $85, $15, $A5, $DF, $29, $F8, $38, $E5, $15, $F0, $1C, $30
.byte $0E, $A5, $DF, $85, $1C, $A5, $E0, $85, $1D, $20, $C4, $CA, $4C, $2B, $C5, $A5
.byte $DB, $A6, $DC, $E8, $85, $1C, $86, $1D, $20, $C4, $CA, $68, $20, $EE, $FE, $A5
.byte $DB, $A6, $DC, $85, $1C, $86, $1D, $A5, $DD, $29, $F8, $85, $15, $A5, $E1, $29
.byte $F8, $38, $E5, $15, $D0, $03, $4C, $D3, $C5, $30, $1B, $A5, $E1, $18, $69, $20
.byte $85, $1E, $A5, $E2, $69, $00, $85, $1F, $20, $84, $C7, $A5, $3B, $29, $1F, $09
.byte $80, $85, $3B, $4C, $7E, $C5, $A5, $E1, $18, $69, $F0, $85, $1E, $A5, $E2, $69
.byte $00, $85, $1F, $20, $84, $C7, $A5, $3B, $29, $1F, $09, $80, $85, $3B, $A5, $DD
.byte $A6, $DE, $85, $1E, $86, $1F, $20, $D1, $C9, $A5, $20, $A2, $01, $A0, $30, $C9
.byte $1E, $10, $04, $A0, $70, $A2, $00, $8A, $45, $3B, $4A, $90, $36, $A9, $01, $45
.byte $3B, $46, $3B, $4A, $26, $3B, $A2, $80, $B9, $28, $06, $29, $0F, $85, $15, $BD
.byte $64, $04, $29, $F0, $05, $15, $99, $28, $06, $E8, $C8, $E0, $88, $D0, $E9, $BD
.byte $64, $04, $99, $28, $06, $E8, $C8, $E0, $90, $D0, $F4, $29, $1F, $A5, $3B, $09
.byte $80, $85, $3B, $20, $2F, $CB, $A5, $DB, $A6, $DC, $85, $DF, $86, $E0, $A5, $DD
.byte $A6, $DE, $85, $E1, $86, $E2, $A9, $E0, $25, $3B, $F0, $03, $20, $A6, $C8, $20
.byte $FE, $C5, $20, $29, $CD, $A9, $06, $20, $EE, $FE, $20, $E4, $C6, $60, $A5, $3D


; C600 - bank 7
.byte $0A, $0A, $05, $3E, $C9, $09, $F0, $01, $60, $A5, $DD, $05, $DE, $F0, $01, $60
.byte $A6, $E3, $CA, $8A, $18, $E5, $E4, $C9, $E0, $B0, $01, $60, $EE, $1D, $05, $AD
.byte $1D, $05, $A8, $38, $E9, $22, $B0, $02, $A0, $22, $98, $38, $E9, $3C, $90, $23
.byte $A0, $26, $B9, $00, $80, $18, $69, $28, $85, $02, $B9, $01, $80, $69, $00, $85
.byte $03, $A0, $00, $B1, $02, $99, $50, $06, $C8, $C0, $10, $D0, $F6, $A0, $21, $8C
.byte $1D, $05, $60, $8C, $1D, $05, $A6, $E4, $B9, $27, $C1, $9D, $28, $05, $E8, $A9
.byte $3B, $CD, $1D, $05, $D0, $3F, $A0, $28, $B9, $00, $80, $85, $06, $B9, $01, $80
.byte $85, $07, $AC, $1D, $05, $B9, $63, $C1, $9D, $28, $05, $E8, $A9, $39, $9D, $28
.byte $05, $E8, $A9, $1D, $85, $09, $A0, $00, $18, $A5, $09, $0A, $A8, $B1, $06, $85
.byte $21, $C8, $B1, $06, $85, $22, $A0, $00, $B1, $21, $9D, $28, $05, $E8, $C6, $09
.byte $D0, $E7, $86, $E4, $60, $A0, $24, $B9, $00, $80, $85, $06, $B9, $01, $80, $85
.byte $07, $AD, $1D, $05, $38, $E9, $1E, $0A, $A8, $B1, $06, $85, $21, $C8, $B1, $06
.byte $85, $22, $AC, $1D, $05, $B9, $63, $C1, $09, $01, $9D, $28, $05, $E8, $A9, $3C
.byte $9D, $28, $05, $E8, $A0, $01, $B1, $21, $9D, $28, $05, $E8, $C8, $C0, $20, $D0
.byte $F5, $86, $E4, $60, $A6, $E3, $CA, $8A, $18, $E5, $E4, $C9, $A0, $B0, $01, $60
.byte $A5, $DB, $85, $1C, $A5, $DC, $85, $1D, $A5, $DD, $85, $1E, $A5, $DE, $85, $1F


; C700 - bank 7
.byte $20, $D1, $C9, $A6, $E4, $A9, $1E, $25, $3B, $4A, $A8, $A5, $20, $D9, $E3, $C1
.byte $10, $03, $18, $69, $3C, $D9, $E3, $C1, $30, $42, $D9, $ED, $C1, $10, $3D, $B9
.byte $F7, $C1, $9D, $28, $05, $E8, $B9, $01, $C2, $9D, $28, $05, $E8, $A9, $3E, $9D
.byte $28, $05, $E8, $98, $C9, $08, $30, $0E, $A0, $20, $A9, $00, $9D, $28, $05, $E8
.byte $88, $D0, $F9, $4C, $5A, $C7, $B9, $05, $C2, $A8, $A9, $20, $85, $09, $B9, $64
.byte $04, $C8, $9D, $28, $05, $E8, $C6, $09, $D0, $F4, $86, $E4, $A6, $3B, $A9, $E1
.byte $25, $3B, $85, $3B, $18, $8A, $29, $1E, $69, $02, $C9, $14, $30, $02, $A9, $00
.byte $05, $3B, $85, $3B, $A9, $04, $C5, $3D, $D0, $06, $A9, $03, $05, $3B, $85, $3B
.byte $60, $4C, $E4, $C6, $A5, $1C, $48, $A5, $1D, $48, $A5, $1E, $48, $A5, $1F, $48
.byte $20, $D1, $C9, $20, $03, $CA, $A9, $21, $85, $08, $20, $94, $CA, $A4, $1C, $B1
.byte $21, $9D, $28, $05, $E6, $09, $E8, $E4, $E3, $F0, $FE, $C6, $08, $F0, $1E, $20
.byte $73, $CA, $C8, $C0, $20, $D0, $E8

  ; LDA #$00
  ; STA $1C
  jslb dd_update_row_attributes, $a0
  INC $1D
  ASL $09
  JSR $CAB4
  JSR $CA03
  JSR $CA94
  LDY #$00
  JMP $C79F

  ; last bit
  ASL $09
  JSR $CAB4
  LDA $DB
  AND #$0F
  TAX
  LDA $C1D2,X
  LSR
  BCC :+
  JSR $CA73
  ; need to do 1 more attr. update here
: 
  ; PLA
  ; STA $1F
  ; PLA
  ; STA $1E
  jslb dd_one_off_update, $a0
  nops 2
  PLA
  STA $1D
  PLA
  STA $1C
  LDA #$01
  JSR $FEEE

.byte $20, $C6, $BD, $60, $85, $16, $A9, $03, $C5, $3D, $D0, $05, $C5, $3E, $D0


; C800 - bank 7
.byte $01, $60, $20, $91, $C9, $A5, $DB, $18, $69, $FD, $85, $1C, $A5, $DC, $69, $00
.byte $29, $07, $85, $1D, $A5, $DD, $18, $69, $28, $85, $1E, $A5, $DE, $69, $00, $85
.byte $1F, $20, $D1, $C9, $A5, $1F, $0A, $0A, $0A, $05, $1D, $A8, $B1, $18, $AA, $BD
.byte $00, $80, $85, $06, $BD, $01, $80, $85, $07, $A5, $1E, $0A, $A8, $B1, $06, $85
.byte $21, $C8, $B1, $06, $85, $22, $A4, $20, $A6, $E4, $A9, $FE, $9D, $28, $05, $A5
.byte $16, $F0, $1A, $A9, $FF, $9D, $28, $05, $E8, $AD, $AA, $06, $9D, $28, $05, $E8
.byte $AD, $A9, $06, $9D, $28, $05, $E8, $AD, $A8, $06, $9D, $28, $05, $E8, $B9, $63
.byte $C1, $18, $65, $1C, $85, $00, $8D, $A9, $06, $B9, $27, $C1, $69, $00, $9D, $28
.byte $05, $8D, $AA, $06, $E8, $A5, $00, $9D, $28, $05, $E8, $A4, $1C, $B1, $21, $8D
.byte $A8, $06, $86, $E4, $A9, $06, $20, $EE, $FE, $60, $00, $40, $20, $60, $C0, $C0
.byte $E0, $E0, $23, $2B, $23, $2B, $A9, $E0, $25, $3B, $4A, $4A, $4A, $4A, $4A, $85
.byte $08, $A5, $08, $C9, $00, $D0, $07, $A9, $1F, $25, $3B, $85, $3B, $60, $A6, $E3
.byte $CA, $8A, $18, $E5, $E4, $C9, $80, $B0, $12, $A9, $1F, $25, $3B, $85, $3B, $A5
.byte $08, $0A, $0A, $0A, $0A, $0A, $05, $3B, $85, $3B, $60, $A4, $08, $88, $A6, $E4
.byte $B9, $A2, $C8, $9D, $28, $05, $E8, $B9, $9E, $C8, $9D, $28, $05, $E8, $A9, $3E
.byte $9D, $28, $05, $E8, $B9, $9A, $C8, $A8, $A9, $20, $85, $09, $B9, $28, $06, $9D


; C900 - bank 7
.byte $28, $05, $E8, $C8, $C6, $09, $D0, $F4, $86, $E4, $C6, $08, $4C, $B1, $C8, $60

  JSR $C9D1
  LDA #$0D
  STA $08
@nes_C917:
  LDA $1F
  ASL A
  ASL A
  ASL A
  STA $15
  LDA $1D
  AND #$07
  ORA $15
  TAY
  LDA ($18),Y
  TAX
  LDA $8002,X
  STA $23
  LDA $8003,X
  STA $24
  LDA $20
  LSR A
  TAY
  LDA $C19F,Y
  CLC
  ADC #$28
  STA $02
  LDA #$06
  ADC #$00
  STA $03
  LDA $1E
  LSR A
  TAY
  LDA $C1BD,Y
  LSR A
  LDX #$0F
  BCC :+
  LDX #$F0
: CLC
  STX $04
  ADC $23
  STA $23
  LDA $24
  ADC #$00
  STA $24
  LDY $1C
  JSR $CA73
  LDX $20
  INX
  CPX #$3C
  BMI :+
  LDX #$00
: INX
  CPX #$3C
  BMI :+
  LDX #$00
: STX $20
  LDX $1E
  INX
  CPX #$1E
  BMI :+
  LDX #$00
  INC $1F
: INX
;   CPX #$1E
;   BMI :+
;   LDX #$00
;   INC $1F
; : STX $1E
;   DEC $08
; moved to dd_update_column_attributes
  jslb dd_update_column_attributes, $a0
  nops 8
  BNE @nes_C917
  RTS

; C991
.byte $A5, $3D, $0A, $0A, $0A, $85, $15, $A5, $3E, $0A, $05, $15, $A8, $B9, $00
.byte $C0, $BE, $01, $C0, $85, $18, $86, $19, $B9, $1E, $C0, $85, $15, $20, $EE, $FE
.byte $B9, $3C, $C0, $85, $1A, $B9, $3D, $C0, $85, $1B, $60, $A5, $DB, $A6, $DC, $85
.byte $1C, $86, $1D, $A5, $DD, $18, $69, $20, $85, $1E, $A5, $DE, $69, $00, $85, $1F
.byte $60, $46, $1C, $46, $1C, $46, $1C, $A5, $1F, $A0, $00, $84, $1F, $A2, $04, $C9
.byte $0F, $90, $02, $E9, $0F, $26, $1F, $06, $1E, $2A, $CA, $D0, $F2, $06, $1E, $2A
.byte $85, $20, $4A, $66, $1E, $C9, $0F, $90, $02, $E9, $0F, $26, $1F, $06, $1E, $2A


; CA00 - bank 7
.byte $85, $1E, $60, $A5, $1F, $0A, $0A, $0A, $85, $15, $A5, $1D, $29, $07, $05, $15
.byte $A8, $B1, $18, $AA, $BD, $02, $80, $85, $23, $BD, $03, $80, $85, $24, $BD, $00
.byte $80, $85, $06, $BD, $01, $80, $85, $07, $A4, $20, $B9, $63, $C1, $18, $65, $1C
.byte $85, $00, $B9, $27, $C1, $69, $00, $85, $01, $98, $4A, $A8, $B9, $9F, $C1, $18
.byte $69, $28, $85, $02, $A9, $06, $69, $00, $85, $03, $A5, $1E, $4A, $A8, $B9, $BD
.byte $C1, $4A, $A2, $0F, $90, $02, $A2, $F0, $18, $86, $04, $65, $23, $85, $23, $A5
.byte $24, $69, $00, $85, $24, $A5, $1E, $0A, $A8, $B1, $06, $85, $21, $C8, $B1, $06
.byte $85, $22, $60, $98, $84, $15, $4A, $4A, $A8, $A9, $33, $90, $02, $A9, $CC, $25
.byte $04, $85, $16, $49, $FF, $31, $02, $85, $17, $A5, $16, $31, $23, $05, $17, $91
.byte $02, $A4, $15, $60, $A9, $FF, $85, $09, $A6, $E4, $A5, $01, $9D, $28, $05, $E8
.byte $E4, $E3, $F0, $FE, $A5, $00, $9D, $28, $05, $E8, $E4, $E3, $F0, $FE, $E8, $E4
.byte $E3, $F0, $FE, $60, $86, $15, $A6, $E4, $E8, $E8, $A5, $09, $9D, $28, $05, $A6
.byte $15, $86, $E4, $60, $A5, $1C, $48, $A5, $1D, $48, $20, $D1, $C9, $20, $03, $CA
.byte $20, $94, $CA, $A9, $19, $85, $05, $A5, $1E, $0A, $A8, $B1, $06, $85, $21, $C8
.byte $B1, $06, $85, $22, $A4, $1C, $B1, $21, $9D, $28, $05, $E6, $09, $E8, $E4, $E3
.byte $F0, $FE, $C6, $05, $D0, $18, $38, $26, $09, $20, $B4, $CA, $A5, $DD, $85, $1E


; CB00 - bank 7
.byte $A5, $DE, $85, $1F, $68, $85, $1D, $68, $85, $1C, $20, $BB, $CE, $60, $C6, $20
.byte $10, $04, $A9, $3B, $85, $20, $C6, $1E, $10, $BD, $A9, $1D, $85, $1E, $C6, $1F
.byte $38, $26, $09, $20, $B4, $CA, $20, $03, $CA, $20, $94, $CA, $4C, $D7, $CA, $A5
.byte $DB, $85, $1C, $A5, $DC, $85, $1D, $A5, $DD, $85, $1E, $A5, $DE, $85, $1F, $20
.byte $D1, $C9, $A5, $1F, $0A, $0A, $0A, $85, $15, $A5, $1D, $29, $07, $05, $15, $A8
.byte $B1, $1A, $8D, $F4, $04, $60, $CD, $CD, $CD, $CC, $CC, $CC, $CC, $CC, $CC, $CC
.byte $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC
.byte $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $CC, $0F, $08, $01, $FA, $F3, $EC
.byte $E5, $DE, $D7, $D0, $C9, $C2, $BB, $B4, $AD, $A6, $9F, $98, $91, $8A, $83, $7C
.byte $75, $6E, $67, $60, $59, $52, $4B, $44, $3D, $36, $2F, $28, $21, $1A, $A9, $64
.byte $85, $E8, $A6, $E3, $E4, $E4, $D0, $01, $60

; cba9
  LDA $0528,X
  BPL :++
  INX
  LSR A
  BCC :+
  LDA $0528,X
  jsr @store_vm_add_h_to_range ; LDA PpuAddr_2006
  INX
  LDA $0528,X
  STA VMADDL ; PpuAddr_2006
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
: LDA $0528,X
  jsr @store_vm_add_h_to_range ; STA PpuAddr_2006
  INX
  LDA $0528,X
  STA VMADDL ; PpuAddr_2006
  INX
  LDA #$FF
  nops 3 ; STA VMDATAL ; PpuData_2007
  STX $E3
  JMP $CBA4
: INX
  jsr @store_vm_add_h_to_range ; STA PpuAddr_2006
  LDA $0528,X
  INX
  STA VMADDL ; PpuAddr_2006
  LDA $0528,X
  INX
  LSR A
  TAY

;   LDA $FF
;   AND #$FB
;   BCC :+
;   ORA #$04 ; I don't see how this ever gets triggered...
; : STA $FF
;   STA PpuControl_2000
  jslb change_write_increment_based_on_carry_flag, $A0
  nops 9

  TYA
  CLC
  ADC #$0B
  STA $E7
  LDA $E8
  SBC $E7
  STA $E8
  BCS :+
  RTS
:
; CC0C - bank 7
  TYA
  LDA $CB7A,Y
  STA $E5
  LDA $CB56,Y
  STA $E6
  JMP ($00E5)
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  LDA $0528,X
  STA VMDATAL ; PpuData_2007
  INX
  STX $E3
  JMP $CBA4

  LDA #$00
  JSR $FEEE
  JSR $BE71
  LDA #$06
  JSR $FEEE
  RTS

; CD29 - bank 7
.byte $A0, $00, $B9, $46, $04, $29, $10
.byte $F0, $2C, $B9, $47, $04, $38, $E9, $01, $99, $47, $04, $D0, $21, $B9, $46, $04
.byte $29, $20, $F0, $10, $B9, $46, $04, $29, $DF, $99, $46, $04, $A9, $30, $99, $47
.byte $04, $4C, $5E, $CD, $B9, $46, $04, $29, $AF, $09, $80, $99, $46, $04, $B9, $46
.byte $04, $0A, $B0, $09, $C8, $C8, $C0, $1C, $D0, $C1, $4C, $74, $CE, $98, $AA, $BD
.byte $47, $04, $C9, $00, $F0, $06, $DE, $47, $04, $4C, $74, $CE, $A9, $01, $20, $EE
.byte $FE, $98, $0A, $A8, $B9, $63, $B6, $9D, $47, $04, $B9, $9D, $B6, $85, $21, $B9
.byte $9E, $B6, $85, $22, $B9, $9F, $B6, $85, $23, $B9, $A0, $B6, $85, $24, $84, $15
.byte $BD, $46, $04, $29, $0F, $0A, $A8, $D0, $06, $A5, $15, $4A, $20, $9B, $CE, $B1
.byte $21, $85, $06, $C8, $B1, $21, $85, $07, $A4, $15, $A9, $00, $85, $05, $B9, $62
.byte $B6, $85, $08, $A5, $DB, $85, $1C, $A5, $DC, $4A, $66, $1C, $4A, $66, $1C, $4A
.byte $66, $1C, $A5, $DE, $85, $1F, $A5, $DD, $46, $1F, $6A, $46, $1F, $6A, $46, $1F
.byte $6A, $18, $69, $05, $85, $1E, $A5, $15, $4A, $AA, $BD, $D9, $B6, $85, $1D, $BD
.byte $DA, $B6, $85, $1F, $A5, $1E, $18, $69, $19, $C5, $1F, $10, $03, $4C, $42, $CE


; CE00 - bank 7
.byte $A5, $1F, $18, $65, $08, $C5, $1E, $10, $03, $4C, $42, $CE, $A5, $1D, $38, $E5
.byte $1C, $F0, $24, $10, $03, $4C, $37, $CE, $A5, $1C, $18, $69, $20, $85, $16, $A5
.byte $1D, $38, $E5, $16, $90, $03, $4C, $37, $CE, $84, $15, $A9, $00, $85, $20, $38
.byte $A5, $05, $20, $81, $BD, $A4, $15, $E6, $1D, $E6, $05, $B9, $61, $B6, $C5, $05
.byte $D0, $CA, $98, $4A, $AA, $BD, $46, $04, $0A, $0A, $90, $10, $BD, $46, $04, $29
.byte $0F, $D9, $64, $B6, $F0, $1F, $18, $69, $01, $4C, $68, $CE, $BD, $46, $04, $29
.byte $0F, $C9, $00, $F0, $10, $38, $E9, $01, $85, $15, $BD, $46, $04, $29, $F0, $05
.byte $15, $9D, $46, $04, $60, $8A, $4A, $A8, $A9, $7F, $3D, $46, $04, $9D, $46, $04
.byte $29, $40, $D0, $01, $60, $B9, $F7, $B6, $4A, $A9, $00, $90, $07, $A9, $30, $9D
.byte $47, $04, $A9, $10, $1D, $46, $04, $9D, $46, $04, $60, $84, $16, $A8, $B9, $46
.byte $04, $29, $40, $F0, $13, $98, $4A, $A8, $B9, $F7, $B6, $0A, $90, $0A, $0A, $A9
.byte $10, $B0, $02, $A9, $11, $20, $E1, $FB, $A4, $16, $60, $A9, $01, $20, $EE, $FE
.byte $A5, $3D, $0A, $0A, $05, $3E, $A8, $B9, $06, $B7, $10, $08, $60, $E6, $09, $A4
.byte $09, $4C, $EC, $CE, $A8, $85, $09, $A5, $1F, $4A, $66, $1E, $4A, $66, $1E, $66
.byte $1E, $A5, $1D, $4A, $66, $1C, $4A, $66, $1C, $4A, $66, $1C, $B9, $15, $B7, $10
.byte $01, $60, $0A, $A8, $B9, $DA, $B6, $85, $1F, $B9, $D9, $B6, $85, $1D, $98, $0A


; CF00 - bank 7
.byte $A8, $B9, $62, $B6, $18, $65, $1F, $38, $E5, $1E, $C9, $05, $10, $03, $4C, $CD
.byte $CE, $C9, $28, $30, $03, $4C, $CD, $CE, $A5, $1C, $38, $E5, $1D, $90, $05, $D9
.byte $61, $B6, $30, $03, $4C, $CD, $CE, $0A, $85, $1E, $B9, $62, $B6, $85, $08, $B9
.byte $9D, $B6, $85, $21, $B9, $9E, $B6, $85, $22, $B9, $9F, $B6, $85, $00, $B9, $A0
.byte $B6, $85, $01, $98, $4A, $A8, $4A, $AA, $B9, $46, $04, $29, $0F, $85, $15, $D0
.byte $08, $BD, $F7, $B6, $4A, $4A, $90, $01, $60, $A5, $15, $0A, $A8, $B1, $21, $85
.byte $06, $C8, $B1, $21, $85, $07, $A4, $1E, $B1, $00, $85, $02, $B1, $06, $85, $21
.byte $C8, $B1, $00, $85, $03, $B1, $06, $85, $22, $A6, $E4, $A5, $03, $9D, $28, $05
.byte $E8, $A5, $02, $9D, $28, $05, $E8, $A5, $08, $38, $E9, $01, $2A, $9D, $28, $05
.byte $E8, $A0, $00, $B1, $21, $9D, $28, $05, $E8, $C8, $C4, $08, $D0, $F5, $86, $E4
.byte $60, $A5, $DD, $85, $1E, $A5, $DE, $4A, $66, $1E, $4A, $66, $1E, $4A, $66, $1E
.byte $A5, $DB, $85, $1C, $A5, $DC, $4A, $66, $1C, $4A, $66, $1C, $4A, $66, $1C, $A9
.byte $01, $20, $EE, $FE, $A5, $3D, $0A, $0A, $05, $3E, $A8, $B9, $06, $B7, $85, $09
.byte $10, $01, $60, $A4, $09, $B9, $15, $B7, $10, $01, $60, $0A, $A8, $B9, $DA, $B6
.byte $85, $1F, $B9, $D9, $B6, $85, $1D, $98, $0A, $A8, $B9, $9D, $B6, $85, $21, $B9
.byte $9E, $B6, $85, $22, $B9, $9F, $B6, $85, $00, $B9, $A0, $B6, $85, $01, $B9, $61


; D000 - bank 7
.byte $B6, $85, $02, $B9, $62, $B6, $85, $03, $98, $4A, $A8, $4A, $AA, $B9, $46, $04
.byte $29, $0F, $85, $15, $D0, $0A, $BD, $F7, $B6, $4A, $4A, $90, $03, $4C, $70, $D0
.byte $A5, $15, $0A, $A8, $B1, $21, $85, $06, $C8, $B1, $21, $85, $07, $A9, $00, $85
.byte $08, $A5, $1D, $38, $E5, $1C, $C9, $1F, $B0, $2C, $A5, $08, $0A, $A8, $B1, $00
.byte $85, $15, $B1, $06, $85, $21, $C8

  LDA ($00),Y
  ; STA $2006
  JSR @store_vm_add_h_to_range
  LDA ($06),Y
  STA $22
  LDA $15
  STA VMADDL ; $2006
  
  ; LDA #$04
  ; STA $2000
  jslb set_vram_increment_to_32_no_store, $a0
  nops 1

  LDY #$00
: LDA ($21),Y
  STA VMDATAL ; $2007
  INY
  CPY $03
  BNE :-

.byte $E6, $1D, $E6, $08, $A5, $08, $C5, $02, $D0, $C1
.byte $E6, $09, $4C, $D3, $CF, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $A9, $00, $85, $49, $A6, $49, $B5, $4A, $10, $1A, $29, $60, $4A, $4A, $4A, $4A
.byte $A8, $B9, $AD, $D0, $85, $25, $B9, $AE, $D0, $85, $26, $A9, $D0, $48, $A9, $A3
.byte $48, $6C, $25, $00, $E6, $49, $A5, $49, $C9, $08, $90, $D8, $60, $10, $A7, $00
.byte $80, $02, $D7, $B5, $D0, $20, $9E, $FA, $B5, $4A, $29, $1F, $0A, $A8, $B9, $CC
.byte $D0, $85, $25, $B9, $CD, $D0, $85, $26, $6C, $25, $00, $60, $E4, $D0, $C6, $D1
.byte $4B, $D2, $54, $D3, $B1, $D4, $B1, $D3, $B1, $D3, $B1, $D3, $B1, $D3, $B1, $D3
.byte $B1, $D3, $27, $D5, $BD, $A8, $03, $D0, $42, $A5, $5A, $C9, $80, $90, $37, $A9
.byte $01, $95, $AA, $A5, $5A, $95, $5A, $A5, $62, $95, $62, $A9, $00, $95, $72, $95


; D100 - bank 7
.byte $7A, $A9, $B0, $95, $8A, $A9, $01, $95, $92, $A9, $10, $95, $9A, $A9, $00, $9D
.byte $20, $03, $9D, $28, $03, $9D, $10, $03, $9D, $18, $03, $9D, $38, $03, $A9, $80
.byte $9D, $30, $03, $FE, $A8, $03, $A9, $7F, $95, $A2, $60, $C9, $01, $D0, $13, $D6
.byte $AA, $D0, $0E, $FE, $A8, $03, $A9, $04, $95, $AA, $A9, $03, $95, $BA, $20, $2C
.byte $DE, $60, $C9, $02, $D0, $2E, $20, $78, $DF, $20, $33, $DE, $B5, $C2, $18, $69
.byte $17, $95, $A2, $B5, $92, $F0, $19, $B5, $5A, $85, $25, $B5, $62, $85, $26, $B5
.byte $8A, $85, $27, $B5, $92, $85, $28, $B5, $72, $85, $15, $20, $44, $FC, $90, $03
.byte $FE, $A8, $03, $60, $C9, $03, $F0, $04, $C9, $05, $D0, $0F, $A9, $02, $95, $AA
.byte $A9, $05, $95, $BA, $FE, $A8, $03, $20, $2C, $DE, $60, $C9, $04, $F0, $04, $C9
.byte $06, $D0, $2A, $38, $E9, $04, $0A, $0A, $85, $15, $20, $33, $DE, $B5, $C2, $C9
.byte $04, $90, $12, $A9, $00, $9D, $A8, $03, $B5, $4A, $09, $01, $95, $4A, $A9, $7F
.byte $95, $A2, $4C, $BD, $D1, $65, $15, $A8, $B9, $BE, $D1, $95, $A2, $60, $1A, $1E
.byte $1F, $20, $1A, $1B, $1C, $1D, $BD, $A8, $03, $F0, $03, $4C, $2B, $D1, $A5, $49
.byte $38, $E9, $01, $29, $03, $09, $04, $A8, $B9, $A8, $03, $C9, $02, $90, $5F, $20
.byte $EF, $FD, $29, $0F, $0A, $0A, $0A, $85, $25, $A9, $00, $85, $26, $20, $EF, $FD
.byte $29, $03, $D0, $0B, $A5, $25, $49, $FF, $18, $69, $01, $85, $25, $C6, $26, $AD


; D200 - bank 7
.byte $5A, $00, $18, $65, $25, $95, $5A, $AD, $62, $00, $65, $26, $95, $62, $A5, $3E
.byte $38, $E9, $01, $0A, $0A, $A8, $B5, $5A, $38, $F9, $43, $D2, $B5, $62, $F9, $44
.byte $D2, $90, $1B, $B5, $5A, $38, $F9, $45, $D2, $B5, $62, $F9, $46, $D2, $B0, $0E
.byte $20, $EF, $FD, $29, $03, $A8, $B9, $3F, $D2, $95, $AA, $4C, $FB, $D0, $60, $04
.byte $08, $0C, $10, $00, $00, $00, $02, $00, $02, $00, $03, $BD, $A8, $03, $F0, $03
.byte $4C, $10, $D3, $A9, $00, $85, $15, $A5, $5A, $18, $69, $10, $85, $25, $A5, $62
.byte $69, $00, $85, $26, $D0, $0A, $A5, $25, $38, $E9, $A0, $B0, $1C, $4C, $0B, $D3
.byte $C9, $02, $90, $03, $4C, $0B, $D3, $A9, $04, $85, $15, $A5, $25, $38, $E9, $40
.byte $90, $04, $C9, $60, $90, $03, $4C, $0B, $D3, $38, $E9, $18, $90, $04, $E6, $15
.byte $D0, $F8, $06, $15, $06, $15, $20, $EF, $FD, $4A, $4A, $29, $03, $05, $15, $85
.byte $15, $29, $0F, $C9, $0F, $F0, $04, $C9, $0D, $D0, $02, $C6, $15, $A0, $00, $A5
.byte $15, $C9, $10, $90, $02, $A0, $02, $B9, $4C, $D3, $95, $5A, $B9, $4D, $D3, $95
.byte $62, $A9, $70, $95, $72, $A9, $10, $95, $8A, $A9, $00, $95, $7A, $95, $92, $A5
.byte $15, $4A, $4A, $29, $03, $A8, $F0, $0A, $A9, $18, $18, $75, $5A, $95, $5A, $88
.byte $D0, $F6, $A5, $15, $29, $03, $A8, $48, $F0, $0A, $A9, $10, $18, $75, $8A, $95
.byte $8A, $88, $D0, $F6, $68, $A8, $29, $01, $F0, $07, $B5, $5A, $18, $69, $08, $95


; D300 - bank 7
.byte $5A, $B9, $50, $D3, $95, $AA, $A9, $01, $9D, $A8, $03, $A9, $7F, $95, $A2, $60
.byte $C9, $01, $D0, $1C, $D6, $AA, $D0, $17, $A9, $0E, $20, $E1, $FB, $FE, $A8, $03
.byte $A9, $10, $95, $9A, $20, $2C, $DE, $A9, $05, $95, $AA, $A9, $03, $95, $BA, $60
.byte $C9, $02, $D0, $17, $20, $33, $DE, $B5, $C2, $C9, $02, $90, $07, $A9, $00, $9D
.byte $A8, $03, $F0, $07, $A9, $21, $18, $75, $C2, $95, $A2, $60, $A0, $00, $40, $01
.byte $06, $0C, $18, $20, $BD, $A8, $03, $D0, $2A, $A9, $70, $95, $5A, $A9, $02, $95
.byte $62, $A9, $70, $95, $72, $A9, $09, $95, $8A, $A9, $00, $95, $7A, $95, $92, $20
.byte $2C, $DE, $A9, $04, $95, $AA, $A9, $0C, $95, $BA, $A9, $10, $95, $9A, $A9, $7F
.byte $95, $A2, $60, $C9, $01, $D0, $0F, $A5, $DB, $38, $E9, $A0, $A5, $DC, $E9, $01
.byte $90, $03, $FE, $A8, $03, $60, $20, $33, $DE, $B5, $C2, $C9, $0B, $90, $0A, $A9
.byte $7F, $95, $A2, $A9, $00, $9D, $A8, $03, $60, $B5, $C2, $18, $69, $0C, $95, $A2
.byte $60, $BD, $A8, $03, $30, $3C, $B5, $4A, $29, $1F, $38, $E9, $05, $0A, $85, $15
.byte $0A, $65, $15, $A8, $B9, $6F, $D4, $95, $5A, $B9, $70, $D4, $95, $62, $B9, $71
.byte $D4, $95, $8A, $B9, $72, $D4, $95, $92, $A9, $00, $95, $72, $95, $7A, $B9, $73
.byte $D4, $9D, $08, $03, $B9, $74, $D4, $9D, $00, $03, $BD, $A8, $03, $09, $80, $9D
.byte $A8, $03, $BD, $A8, $03, $29, $7F, $D0, $65, $20, $62, $DE, $B5, $4A, $29, $1F


; D400 - bank 7
.byte $38, $E9, $05, $85, $15, $0A, $0A, $65, $15, $A8, $B9, $93, $D4, $18, $65, $49
.byte $85, $15, $BD, $00, $03, $30, $02, $C8, $C8, $A6, $15, $BD, $00, $00, $29, $FE
.byte $D9, $94, $D4, $D0, $28, $BD, $08, $00, $D9, $95, $D4, $D0, $20, $A6, $49, $BD
.byte $00, $03, $49, $80, $9D, $00, $03, $BD, $A8, $03, $49, $01, $9D, $A8, $03, $20
.byte $EF, $FD, $4A, $4A, $29, $03, $A8, $B9, $6B, $D4, $95, $B2, $60, $A6, $49, $A9
.byte $10, $95, $9A, $29, $08, $A9, $09, $95, $A2, $A9, $00, $95, $D2, $60, $D6, $B2
.byte $D0, $08, $BD, $A8, $03, $49, $01, $9D, $A8, $03, $60, $08, $10, $18, $20, $70
.byte $02, $82, $01, $06, $40, $A8, $02, $6A, $01, $06, $C0, $30, $02, $5A, $01, $06
.byte $C0, $60, $02, $38, $02, $04, $00, $58, $02, $88, $01, $04, $80, $88, $02, $C0
.byte $00, $04, $00, $5A, $38, $02, $98, $02, $5A, $88, $02, $C8, $02, $5A, $08, $02
.byte $58, $02, $8A, $00, $02, $5C, $02, $8A, $68, $01, $AC, $01, $8A, $80, $00, $EC
.byte $00, $BD, $A8, $03, $29, $7F, $D0, $38, $BD, $A8, $03, $30, $32, $A9, $10, $95
.byte $9A, $A9, $0B, $95, $A2, $A9, $E0, $95, $5A, $A9, $02, $95, $62, $A9, $70, $95
.byte $72, $A9, $00, $95, $7A, $A9, $90, $95, $8A, $A9, $00, $95, $92, $A9, $08, $9D
.byte $08, $03, $A9, $80, $9D, $00, $03, $BD, $A8, $03, $09, $80, $9D, $A8, $03, $60
.byte $C9, $01, $D0, $16, $20, $62, $DE, $B5, $92, $10, $0E, $B5, $8A, $C9, $F1, $B0


; D500 - bank 7
.byte $08, $FE, $A8, $03, $A9, $00, $9D, $00, $03, $60, $C9, $02, $D0, $01, $60, $C9
.byte $03, $D0, $10, $20, $62, $DE, $B5, $92, $30, $09, $B5, $8A, $C9, $80, $90, $03
.byte $FE, $A8, $03, $60, $4C, $DF, $D5, $BD, $A8, $03, $30, $63, $A5, $5A, $38, $E9
.byte $C0, $A5, $62, $E9, $01, $B0, $ED, $A9, $00, $95, $62, $95, $72, $95, $7A, $A9
.byte $60, $95, $8A, $A9, $02, $95, $92, $20, $EF, $FD, $29, $0F, $0A, $0A, $75, $8A
.byte $95, $8A, $20, $EF, $FD, $29, $0F, $0A, $95, $5A, $A9, $80, $9D, $10, $03, $A9
.byte $02, $9D, $18, $03, $A9, $00, $9D, $20, $03, $A9, $01, $9D, $28, $03, $A9, $38
.byte $9D, $30, $03, $A9, $00, $9D, $38, $03, $20, $2C, $DE, $A9, $0F, $95, $9A, $A9
.byte $05, $95, $BA, $A9, $04, $95, $AA, $BD, $A8, $03, $09, $80, $9D, $A8, $03, $20
.byte $78, $DF, $B5, $5A, $85, $25, $B5, $62, $85, $26, $B5, $8A, $85, $27, $B5, $92
.byte $85, $28, $B5, $72, $85, $15, $20, $44, $FC, $90, $21, $A9, $0B, $20, $E1, $FB
.byte $A5, $27, $95, $8A, $A5, $28, $95, $92, $20, $F2, $DF, $BD, $28, $03, $C9, $06
.byte $90, $0A, $A9, $FF, $9D, $20, $03, $A9, $05, $9D, $28, $03, $20, $33, $DE, $B5
.byte $C2, $18, $69, $05, $95, $A2, $B5, $92, $D0, $05, $A9, $00, $9D, $A8, $03, $60
.byte $85, $15, $8A, $48, $98, $48, $A0, $04, $B9, $4A, $00, $10, $0E, $8A, $D9, $9E
.byte $03, $F0, $08, $C8, $C0, $08, $90, $F0, $4C, $CA, $D6, $A6, $49, $BD, $CA, $00


; D600 - bank 7
.byte $85, $24, $BD, $9E, $03, $09, $C0, $99, $4A, $00, $98, $48, $A9, $00, $85, $16
.byte $B5, $52, $99, $52, $00, $8A, $18, $69, $08, $AA, $98, $18, $69, $08, $A8, $E6
.byte $16, $A5, $16, $C9, $09, $90, $E9, $68, $48, $AA, $A0, $00, $A5, $15, $F0, $02
.byte $A0, $02, $B9, $DA, $D6, $85, $17, $B9, $DB, $D6, $85, $18, $A5, $15, $D0, $0C
.byte $B5, $4A, $29, $1F, $A8, $B9, $EC, $D6, $A8, $4C, $55, $D6, $B5, $4A, $29, $1F
.byte $A8, $B9, $F7, $D6, $A8, $B1, $17, $48, $A5, $24, $F0, $07, $68, $49, $FF, $18
.byte $69, $01, $48, $68, $20, $87, $DE, $C8, $B1, $17, $20, $C3, $DE, $68, $A8, $A6
.byte $49, $BD, $96, $03, $29, $7F, $9D, $96, $03, $BD, $9E, $03, $29, $1F, $AA, $BD
.byte $CF, $D6, $99, $9A, $00, $A2, $07, $A5, $15, $D0, $02, $A2, $03, $8A, $99, $A8
.byte $03, $C9, $03, $D0, $0E, $B9, $4A, $00, $29, $1F, $C9, $01, $D0, $05, $A9, $07
.byte $20, $E1, $FB, $A2, $40, $A5, $24, $F0, $02, $A2, $C0, $8A, $99, $00, $03, $A2
.byte $00, $B9, $00, $03, $10, $02, $A2, $80, $8A, $99, $CA, $00, $B9, $4A, $00, $29
.byte $1F, $C9, $0A, $D0, $05, $A9, $0A, $20, $E1, $FB, $68, $A8, $68, $AA, $60, $09
.byte $0A, $0B, $0C, $0D, $0E, $0F, $17, $18, $19, $10, $DE, $D6, $E6, $D6, $00, $20
.byte $00, $28, $08, $16, $00, $20, $00, $20, $00, $28, $00, $28, $00, $00, $00, $00
.byte $02, $02, $02, $06, $06, $06, $04, $00, $00, $00, $00, $02, $02, $02, $04, $04


; D700 - bank 7
.byte $04, $04, $A6, $49, $A5, $47, $29, $01, $F0, $12, $A9, $00, $95, $4A, $BC, $9E
.byte $03, $B9, $96, $03, $29, $7F, $99, $96, $03, $4C, $5D, $D7, $B5, $4A, $29, $1F
.byte $A8, $B9, $CF, $D6, $95, $9A, $C0, $0A, $D0, $09, $BD, $A8, $03, $29, $7F, $C9
.byte $03, $D0, $0E, $BD, $A8, $03, $29, $7F, $F0, $07, $C9, $06, $F0, $03, $20, $33
.byte $FC, $20, $B9, $DD, $B5, $4A, $F0, $15, $B5, $4A, $F0, $11, $29, $1F, $0A, $A8
.byte $B9, $5E, $D7, $85, $25, $B9, $5F, $D7, $85, $26, $6C, $25, $00, $60, $74, $D7
.byte $A4, $D7, $DF, $D7, $0F, $D8, $3F, $D8, $6F, $D8, $9F, $D8, $CF, $D8, $04, $D9
.byte $30, $D9, $5C, $D9, $BD, $A8, $03, $30, $03, $20, $98, $DD, $BD, $A8, $03, $29
.byte $7F, $0A, $A8, $B9, $90, $D7, $85, $25, $B9, $91, $D7, $85, $26, $6C, $25, $00
.byte $8C, $D9, $B7, $D9, $90, $DA, $00, $00, $00, $00, $26, $DE, $00, $00, $90, $DA
.byte $00, $00, $69, $DD, $BD, $A8, $03, $30, $0E, $29, $7F, $C9, $02, $D0, $05, $A9
.byte $17, $20, $E1, $FB, $20, $98, $DD, $BD, $A8, $03, $29, $7F, $0A, $A8, $B9, $CB
.byte $D7, $85, $25, $B9, $CC, $D7, $85, $26, $6C, $25, $00, $8C, $D9, $B7, $D9, $90
.byte $DA, $39, $DC, $00, $00, $26, $DE, $F0, $DB, $90, $DA, $00, $00, $69, $DD, $BD
.byte $A8, $03, $30, $03, $20, $98, $DD, $BD, $A8, $03, $29, $7F, $0A, $A8, $B9, $FB
.byte $D7, $85, $25, $B9, $FC, $D7, $85, $26, $6C, $25, $00, $8C, $D9, $B7, $D9, $90


; D800 - bank 7
.byte $DA, $00, $00, $00, $00, $26, $DE, $00, $00, $90, $DA, $00, $00, $69, $DD, $BD
.byte $A8, $03, $30, $03, $20, $98, $DD, $BD, $A8, $03, $29, $7F, $0A, $A8, $B9, $2B
.byte $D8, $85, $25, $B9, $2C, $D8, $85, $26, $6C, $25, $00, $8C, $D9, $B7, $D9, $90
.byte $DA, $90, $DA, $4F, $DB, $26, $DE, $00, $00, $90, $DA, $9F, $DB, $69, $DD, $BD
.byte $A8, $03, $30, $03, $20, $98, $DD, $BD, $A8, $03, $29, $7F, $0A, $A8, $B9, $5B
.byte $D8, $85, $25, $B9, $5C, $D8, $85, $26, $6C, $25, $00, $8C, $D9, $B7, $D9, $90
.byte $DA, $90, $DA, $00, $00, $0F, $DD, $00, $00, $90, $DA, $00, $00, $69, $DD, $BD
.byte $A8, $03, $30, $03, $20, $98, $DD, $BD, $A8, $03, $29, $7F, $0A, $A8, $B9, $8B
.byte $D8, $85, $25, $B9, $8C, $D8, $85, $26, $6C, $25, $00, $8C, $D9, $B7, $D9, $90
.byte $DA, $90, $DA, $00, $00, $0F, $DD, $00, $00, $90, $DA, $00, $00, $69, $DD, $BD
.byte $A8, $03, $30, $03, $20, $98, $DD, $BD, $A8, $03, $29, $7F, $0A, $A8, $B9, $BB
.byte $D8, $85, $25, $B9, $BC, $D8, $85, $26, $6C, $25, $00, $8C, $D9, $B7, $D9, $90
.byte $DA, $90, $DA, $00, $00, $0F, $DD, $00, $00, $90, $DA, $00, $00, $69, $DD, $BD
.byte $A8, $03, $30, $0C, $C9, $03, $D0, $05, $A9, $07, $20, $E1, $FB, $20, $98, $DD
.byte $BD, $A8, $03, $29, $7F, $0A, $A8, $B9, $F4, $D8, $85, $25, $B9, $F5, $D8, $85
.byte $26, $6C, $25, $00, $8C, $D9, $B7, $D9, $90, $DA, $A4, $DC, $00, $00, $26, $DE


; D900 - bank 7
.byte $F0, $DB, $90, $DA, $BD, $A8, $03, $30, $03, $20, $98, $DD, $BD, $A8, $03, $29
.byte $7F, $0A, $A8, $B9, $20, $D9, $85, $25, $B9, $21, $D9, $85, $26, $6C, $25, $00
.byte $8C, $D9, $B7, $D9, $90, $DA, $00, $00, $00, $00, $26, $DE, $00, $00, $90, $DA
.byte $BD, $A8, $03, $30, $03, $20, $98, $DD, $BD, $A8, $03, $29, $7F, $0A, $A8, $B9
.byte $4C, $D9, $85, $25, $B9, $4D, $D9, $85, $26, $6C, $25, $00, $8C, $D9, $B7, $D9
.byte $90, $DA, $00, $00, $00, $00, $26, $DE, $00, $00, $90, $DA, $BD, $A8, $03, $30
.byte $03, $20, $98, $DD, $BD, $A8, $03, $29, $7F, $0A, $A8, $B9, $78, $D9, $85, $25
.byte $B9, $79, $D9, $85, $26, $6C, $25, $00, $8C, $D9, $CD, $DB, $CD, $DB, $F0, $DC
.byte $CD, $DB, $CD, $DB, $F0, $DB, $CD, $DB, $CD, $DB, $CD, $DB, $BC, $9E, $03, $B9
.byte $68, $03, $9D, $68, $03, $B9, $70, $03, $9D, $70, $03, $A9, $00, $85, $15, $B9
.byte $52, $00, $95, $52, $98, $18, $69, $08, $A8, $8A, $18, $69, $08, $AA, $E6, $15
.byte $A5, $15, $C9, $09, $90, $E9, $60, $BC, $9E, $03, $C0, $FF, $F0, $0D, $B9, $96
.byte $03, $10, $08, $A9, $00, $9D, $A8, $03, $4C, $0B, $DA, $BD, $8E, $03, $29, $7F
.byte $9D, $8E, $03, $B5, $4A, $29, $1F, $A8, $B9, $0C, $DA, $BC, $00, $03, $30, $02
.byte $49, $80, $95, $A2, $20, $B5, $DD, $A9, $FF, $9D, $9E, $03, $B5, $4A, $29, $1F
.byte $C9, $03, $D0, $0D, $F6, $B2, $B5, $B2, $C9, $40, $90, $05, $A9, $04, $9D, $A8


; DA00 - bank 7
.byte $03, $A5, $47, $29, $01, $F0, $04, $A9, $00, $95, $4A, $60, $02, $00, $00, $00
.byte $80, $00, $00, $00, $02, $03, $A9, $02, $95, $BA, $A9, $00, $85, $24, $A0, $00
.byte $BD, $A8, $03, $29, $7F, $C9, $02, $F0, $3F, $A0, $06, $C9, $07, $F0, $09, $B5
.byte $4A, $29, $1F, $A8, $B9, $85, $DA, $A8, $B9, $6D, $DA, $9D, $10, $03, $C8, $8A
.byte $18, $69, $08, $AA, $E6, $24, $A5, $24, $C9, $06, $90, $EC, $A6, $49, $BD, $00
.byte $03, $10, $15, $BD, $10, $03, $49, $FF, $18, $69, $01, $9D, $10, $03, $BD, $18
.byte $03, $49, $FF, $69, $00, $9D, $18, $03, $A9, $FF, $95, $AA, $60, $00, $03, $00
.byte $04, $00, $01, $00, $00, $00, $03, $00, $01, $00, $03, $00, $03, $00, $01, $00
.byte $02, $00, $02, $00, $01, $0C, $0C, $0C, $0C, $0C, $0C, $12, $0C, $0C, $0C, $0C
.byte $B5, $AA, $D0, $03, $20, $16, $DA, $BD, $8E, $03, $09, $80, $9D, $8E, $03, $20
.byte $78, $DF, $B5, $4A, $29, $1F, $0A, $A8, $B9, $37, $DB, $85, $15, $B9, $38, $DB
.byte $85, $16, $B4, $C2, $B1, $15, $BC, $00, $03, $30, $02, $09, $80, $95, $A2, $B5
.byte $4A, $29, $1F, $C9, $03, $D0, $0E, $A9, $00, $18, $75, $C2, $BC, $00, $03, $30
.byte $02, $09, $80, $95, $A2, $20, $B5, $DD, $B5, $4A, $29, $1F, $C9, $03, $D0, $1A
.byte $F6, $B2, $B5, $B2, $C9, $04, $90, $36, $A9, $00, $95, $B2, $F6, $C2, $B5, $C2
.byte $C9, $07, $90, $2A, $A9, $00, $95, $C2, $F0, $24, $F6, $B2, $B5, $4A, $29, $1F


; DB00 - bank 7
.byte $0A, $A8, $B9, $1F, $DB, $85, $15, $B9, $20, $DB, $85, $16, $B4, $C2, $B1, $15
.byte $D5, $B2, $B0, $0A, $A9, $00, $95, $B2, $B5, $C2, $D0, $02, $F6, $C2, $60, $35
.byte $DB, $35, $DB, $35, $DB, $35, $DB, $35, $DB, $35, $DB, $35, $DB, $35, $DB, $35
.byte $DB, $35, $DB, $35, $DB, $08, $08, $4D, $DB, $4D, $DB, $4D, $DB, $4D, $DB, $4D
.byte $DB, $4D, $DB, $4D, $DB, $4D, $DB, $4D, $DB, $4D, $DB, $4D, $DB, $01, $02, $A9
.byte $FF, $9D, $9E, $03, $B4, $C2, $B9, $8B, $DB, $BC, $00, $03, $10, $02, $09, $80
.byte $95, $A2, $F6, $B2, $B5, $B2, $C9, $02, $90, $1D, $A9, $00, $95, $B2, $F6, $C2
.byte $B5, $C2, $C9, $10, $D0, $05, $A9, $0A, $20, $E1, $FB, $B5, $C2, $C9, $14, $90
.byte $06, $B5, $4A, $29, $7F, $95, $4A, $20, $B5, $DD, $60, $07, $08, $07, $08, $07
.byte $08, $07, $08, $07, $08, $07, $08, $07, $08, $07, $08, $09, $0A, $0B, $0C, $A9
.byte $FF, $9D, $9E, $03, $A9, $09, $18, $75, $C2, $BC, $00, $03, $10, $02, $09, $80
.byte $95, $A2, $F6, $B2, $B5, $B2, $C9, $02, $90, $0F, $A9, $00, $95, $B2, $F6, $C2
.byte $B5, $C2, $C9, $04, $90, $03, $20, $81, $DB, $20, $B5, $DD, $60, $A9, $01, $18
.byte $75, $C2, $95, $A2, $F6, $B2, $B5, $B2, $C9, $04, $90, $10, $A9, $00, $95, $B2
.byte $F6, $C2, $B5, $C2, $C9, $04, $90, $04, $A9, $00, $95, $4A, $20, $B5, $DD, $60
.byte $A0, $08, $B5, $4A, $29, $1F, $C9, $01, $F0, $08, $A0, $05, $C9, $0A, $F0, $02


; DC00 - bank 7
.byte $A0, $06, $94, $A2, $F6, $B2, $B5, $B2, $C9, $08, $90, $29, $AD, $32, $00, $F0
.byte $20, $A9, $07, $9D, $A8, $03, $A9, $00, $9D, $10, $03, $9D, $18, $03, $9D, $20
.byte $03, $9D, $28, $03, $A9, $00, $9D, $30, $03, $A9, $01, $9D, $38, $03, $4C, $35
.byte $DC, $A9, $00, $95, $4A, $20, $B5, $DD, $60, $BD, $8E, $03, $09, $80, $9D, $8E
.byte $03, $A9, $00, $9D, $30, $03, $9D, $38, $03, $9D, $20, $03, $9D, $28, $03, $A9
.byte $04, $9D, $18, $03, $A9, $80, $9D, $10, $03, $BD, $00, $03, $10, $15, $BD, $10
.byte $03, $49, $FF, $18, $69, $01, $9D, $10, $03, $BD, $18, $03, $49, $FF, $69, $00
.byte $9D, $18, $03, $20, $78, $DF, $A9, $00, $18, $75, $C2, $95, $A2, $BD, $00, $03
.byte $30, $06, $B5, $A2, $09, $80, $95, $A2, $F6, $B2, $B5, $B2, $C9, $01, $90, $10
.byte $A9, $00, $95, $B2, $F6, $C2, $B5, $C2, $C9, $08, $90, $04, $A9, $00, $95, $C2
.byte $20, $B5, $DD, $60, $BD, $8E, $03, $09, $80, $9D, $8E, $03, $A9, $00, $9D, $30
.byte $03, $9D, $38, $03, $9D, $20, $03, $9D, $28, $03, $A9, $06, $9D, $18, $03, $A9
.byte $80, $9D, $10, $03, $BD, $00, $03, $10, $15, $BD, $10, $03, $49, $FF, $18, $69
.byte $01, $9D, $10, $03, $BD, $18, $03, $49, $FF, $69, $00, $9D, $18, $03, $20, $78
.byte $DF, $A0, $07, $BD, $00, $03, $30, $02, $A0, $87, $94, $A2, $20, $B5, $DD, $60
.byte $BD, $8E, $03, $09, $80, $9D, $8E, $03, $A9, $30, $9D, $08, $03, $20, $4C, $DE


; DD00 - bank 7
.byte $A0, $00, $BD, $00, $03, $30, $02, $A0, $80, $94, $A2, $20, $B5, $DD, $60, $BD
.byte $8E, $03, $09, $80, $9D, $8E, $03, $20, $78, $DF, $B5, $4A, $29, $1F, $38, $E9
.byte $04, $85, $15, $0A, $18, $65, $15, $18, $75, $C2, $A8, $48, $B9, $60, $DD, $95
.byte $A2, $BD, $00, $03, $30, $06, $B5, $A2, $09, $80, $95, $A2, $68, $A8, $F6, $B2
.byte $B9, $57, $DD, $D5, $B2, $B0, $0C, $A9, $00, $95, $B2, $B5, $C2, $C9, $02, $B0
.byte $02, $F6, $C2, $20, $B5, $DD, $60, $08, $08, $08, $10, $08, $08, $10, $08, $08
.byte $04, $05, $06, $04, $05, $06, $04, $05, $06, $A9, $00, $95, $9A, $B4, $C2, $B9
.byte $90, $DD, $95, $A2, $20, $B5, $DD, $F6, $B2, $B5, $B2, $C9, $02, $90, $10, $A9
.byte $00, $95, $B2, $F6, $C2, $B5, $C2, $C9, $08, $90, $04, $A9, $00, $95, $4A, $60
.byte $1A, $1B, $1C, $1D, $1E, $1F, $2E, $2F, $BD, $A8, $03, $C9, $08, $D0, $05, $A9
.byte $0A, $20, $E1, $FB, $BD, $A8, $03, $09, $80, $9D, $A8, $03, $A9, $00, $95, $B2
.byte $95, $AA, $95, $C2, $60, $20, $9E, $FA, $60, $BD, $A8, $03, $29, $7F, $C9, $00
.byte $F0, $3D, $B5, $4A, $29, $1F, $C9, $01, $F0, $36, $C9, $0A, $F0, $32, $B5, $72
.byte $18, $75, $8A, $85, $15, $B5, $7A, $75, $92, $85, $16, $A5, $15, $38, $E5, $DD
.byte $85, $17, $A5, $16, $E5, $DE, $85, $18, $A5, $18, $30, $0F, $D0, $0D, $B5, $62
.byte $30, $09, $A5, $DC, $18, $69, $02, $D5, $62, $B0, $04, $A9, $00, $95, $4A, $60


; DE00 - bank 7
.byte $B5, $62, $30, $F7, $A5, $DB, $85, $15, $A5, $DC, $18, $69, $01, $85, $16, $A5
.byte $15, $38, $F5, $5A, $A5, $16, $F5, $62, $90, $E1, $A5, $DB, $38, $F5, $5A, $A5
.byte $DC, $F5, $62, $B0, $D6, $60, $A9, $01, $9D, $A8, $03, $60, $A9, $00, $95, $B2
.byte $95, $C2, $60, $F6, $B2, $B5, $B2, $D5, $AA, $90, $06, $A9, $00, $95, $B2, $F6
.byte $C2, $B5, $C2, $D5, $BA, $90, $04, $A9, $00, $95, $C2, $60, $A6, $49, $BD, $00
.byte $03, $85, $15, $BD, $08, $03, $85, $16, $20, $D5, $DE, $20, $78, $DE, $20, $99
.byte $DE, $60, $A6, $49, $BD, $00, $03, $85, $15, $BD, $08, $03, $85, $16, $20, $D5
.byte $DE, $20, $78, $DE, $20, $B4, $DE, $60, $A5, $25, $9D, $10, $03, $18, $75, $52
.byte $95, $52, $A5, $26, $9D, $18, $03, $08, $75, $5A, $95, $5A, $B5, $62, $69, $00
.byte $28, $10, $03, $18, $69, $FF, $95, $62, $60, $A5, $27, $18, $75, $6A, $95, $6A
.byte $A5, $28, $08, $75, $72, $95, $72, $B5, $7A, $69, $00, $28, $10, $03, $18, $69
.byte $FF, $95, $7A, $60, $A5, $27, $9D, $20, $03, $18, $75, $82, $95, $82, $A5, $28
.byte $9D, $28, $03, $08, $75, $8A, $95, $8A, $B5, $92, $69, $00, $28, $10, $03, $18
.byte $69, $FF, $95, $92, $60, $48, $8A, $48, $98, $48, $20, $E6, $DE, $20, $17, $DF
.byte $68, $A8, $68, $AA, $68, $60, $A5, $15, $29, $60, $4A, $4A, $4A, $4A, $A8, $BE
.byte $0F, $DF, $B9, $10, $DF, $08, $A5, $15, $29, $1F, $95, $17, $28, $10, $07, $A9


; DF00 - bank 7
.byte $20, $38, $F5, $17, $95, $17, $8A, $49, $01, $AA, $A9, $20, $95, $17, $60, $00
.byte $00, $01, $FF, $01, $00, $00, $FF, $A2, $00, $A0, $00, $A9, $00, $85, $26, $85
.byte $28, $B5, $17, $85, $25, $A5, $16, $85, $27, $20, $14, $F4, $A5, $29, $99, $19
.byte $00, $A5, $2A, $99, $1A, $00, $C8, $C8, $E8, $E0, $02, $90, $DE, $A2, $03, $B5
.byte $19, $95, $25, $CA, $10, $F9, $A5, $15, $29, $C0, $4A, $4A, $4A, $4A, $4A, $A8
.byte $A2, $00, $B9, $70, $DF, $10, $11, $B5, $25, $49, $FF, $18, $69, $01, $95, $25
.byte $B5, $26, $49, $FF, $69, $00, $95, $26, $C8, $E8, $E8, $E0, $04, $90, $E3, $60
.byte $00, $00, $00, $FF, $FF, $FF, $FF, $00, $A6, $49, $BD, $20, $03, $38, $FD, $30
.byte $03, $9D, $20, $03, $BD, $28, $03, $FD, $38, $03, $9D, $28, $03, $BD, $28, $03
.byte $10, $11, $A9, $F9, $DD, $28, $03, $90, $0A, $A9, $FF, $9D, $20, $03, $A9, $FA
.byte $9D, $28, $03, $B5, $82, $18, $7D, $20, $03, $95, $82, $BD, $28, $03, $08, $75
.byte $8A, $95, $8A, $B5, $92, $69, $00, $28, $10, $03, $18, $69, $FF, $95, $92, $BD
.byte $10, $03, $18, $75, $52, $95, $52, $BD, $18, $03, $08, $75, $5A, $95, $5A, $B5
.byte $62, $69, $00, $28, $10, $03, $18, $69, $FF, $95, $62, $60, $BD, $10, $03, $49
.byte $FF, $18, $69, $01, $9D, $10, $03, $BD, $18, $03, $49, $FF, $69, $00, $9D, $18
.byte $03, $60, $BD, $20, $03, $49, $FF, $18, $69, $01, $9D, $20, $03, $BD, $28, $03


; E000 - bank 7
.byte $49, $FF, $69, $00, $9D, $28, $03, $60, $BD, $18, $03, $30, $0F, $C9, $01, $B0
.byte $22, $A9, $00, $9D, $10, $03, $A9, $01, $9D, $18, $03, $60, $BD, $10, $03, $38
.byte $E9, $00, $BD, $18, $03, $E9, $FF, $90, $0A, $A9, $00, $9D, $10, $03, $A9, $FF
.byte $9D, $18, $03, $60, $85, $15, $0A, $0A, $65, $15, $65, $15, $A8, $A6, $49, $B9
.byte $64, $E0, $9D, $20, $03, $B9, $65, $E0, $9D, $28, $03, $B9, $66, $E0, $9D, $10
.byte $03, $B9, $67, $E0, $9D, $18, $03, $B9, $68, $E0, $9D, $30, $03, $B9, $69, $E0
.byte $9D, $38, $03, $60, $00, $01, $00, $01, $40, $00, $00, $00, $00, $FF, $30, $00
.byte $00, $01, $00, $FF, $40, $00, $00, $01, $00, $01, $40, $00, $00, $00, $01, $00
.byte $10, $00, $80, $00, $00, $01, $40, $00, $00, $04, $00, $FD, $80, $00, $80, $02
.byte $00, $FE, $40, $00, $00, $02, $00, $01, $40, $00, $80, $00, $60, $00, $20, $00
.byte $80, $00, $A0, $FF, $20, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $40, $48, $8A, $48, $98, $48, $20, $14, $FE, $20, $6D, $EC, $20, $F8, $FB

;   PLA
;   TAY
;   PLA
;   TAX
;   PLA
;   RTI
  JMP @exit_from_interrupt
  nops 3

.byte $48, $8A, $48, $98, $48, $AD, $07, $01, $30, $2A, $AD
.byte $07, $01, $09, $80, $8D, $07, $01, $20, $3D, $FD, $A5, $F7, $25, $F5, $29, $20
.byte $F0, $09, $20, $6A, $FE

; E0E5 - Stack Shenanigans
; NES setting it to #$FF sets it to #$01FF, we have to do that manually here.
  JMP @set_stack_to_1ff
@return_from_stack_shenanigans:
 
.byte $4C, $1A, $E2, $20, $8E, $EE, $20, $C9
.byte $ED, $20, $F8, $FB, $A9, $00, $8D, $07, $01

;   PLA
;   TAY
;   PLA
;   TAX
;   PLA
;   RTI
  JMP @exit_from_interrupt
  nops 3

.byte $48


; E100 - bank 7
.byte $8A, $48, $98, $48, $20, $14, $FE

; e107
  LDA RDNMI ; PpuStatus_2002
  LDA RDNMI ; PpuStatus_2002

.byte $AD, $07, $01
.byte $30, $2F, $AD, $07, $01, $09, $80, $8D, $07, $01, $A5, $33, $D0, $08, $A5, $F7
.byte $25, $F5, $29, $20, $D0, $BC, $20, $9E, $CB, $AD, $07, $01, $29, $01, $F0, $17
.byte $20, $18, $ED, $20, $8E, $EE, $20, $6D, $EC, $EE, $01, $05

  LDA #$00
  STA $0107
;   PLA
;   TAY
;   PLA
;   TAX
;   PLA
;   RTI
  JMP @exit_from_interrupt
  nops 3

; e147
  JSR $EC6D
  JSR $FBF8
  LDY #$02
  JSR $FE1F
  BIT RDNMI ; PpuStatus_2002
  NOP       ; BVC :-
  NOP
  JSR $EC79
  LDA $0107
  AND #$7F
  STA $0107
  JMP $E141
  JSR $FE6A
  LDA #$06
  JSR $FEEE

  ; disabling left most 8 pixels
  ; we just set the value of PPU Mask state,
  ; and let the NMI routine handle it
  LDA PPU_MASK_STATE
  AND #$F9
  STA PPU_MASK_STATE
  nops 3 ; STA PpuMask_2001
  JSR $FC95

.byte $A2, $30, $20, $B2, $E8, $A9, $00
.byte $A2, $02, $A0, $07, $20, $20, $FD, $20, $16, $E9, $20, $03, $E9, $20, $14, $FE
.byte $A2, $00, $BD, $65, $E1, $95, $13, $E8, $E0, $02, $90, $F6, $A9, $00, $20, $E1
.byte $FB, $AD, $03, $01, $C9, $53, $D0, $03, $4C, $1A, $E2, $A9, $20, $20, $E1, $FB
.byte $20, $95, $FC, $20, $6A, $FE, $20, $16, $E9, $20, $03, $E9, $20, $14, $FE, $A9
.byte $00, $20, $5A, $C2, $A9, $1E, $8D, $F4, $04, $A9, $00, $8D, $F5, $04, $20, $27
.byte $ED, $A9, $1B, $20, $C6, $FE, $20, $BD, $EC, $20, $80, $FC, $20, $B9, $FC, $A9
.byte $80, $8D, $00, $01, $A9, $00, $8D, $07, $01, $20, $5E, $FE, $A9, $10, $20, $2D
.byte $FE, $A9, $1F, $8D, $F4, $04, $A9, $02, $20, $2D, $FE, $A9, $20, $8D, $F4, $04


; E200 - bank 7
.byte $A9, $02, $20, $2D, $FE, $A9, $1C, $8D, $F4, $04, $A9, $04, $85, $3D, $A9, $02
.byte $85, $3E, $A9, $80, $20, $2D, $FE, $4C, $12, $E2, $20, $6A, $FE, $A9, $1F, $20
.byte $76, $FE, $A9, $00, $20, $E1, $FB, $20, $95, $FC, $20, $16, $E9, $20, $03, $E9
.byte $20, $14, $FE, $A9, $06, $20, $EE, $FE, $A9, $04, $85, $3D, $A9, $02, $85, $3E
.byte $A9, $00, $85, $30, $85, $31, $85, $32, $85, $33, $8D, $F5, $04, $A9, $00, $20
.byte $5A, $C2

; E254 - VM Writes
  LDA #$2A   ; #$2A
  jsr @store_vm_add_h_to_range ; STA VMADDH ; PpuAddr_2006
  LDA #$60
  STA VMADDL ; PpuAddr_2006
  LDA #$60
  STA $25
  LDA #$01
  STA $26
: LDA #$00
  STA VMDATAL ; PpuData_2007
  LDA $25
  SEC
  SBC #$01
  STA $25
  LDA $26
  SBC #$00
  STA $26
  ORA $25
  BNE :-

  jslb set_bottom_3_rows_of_attributes_to_55, $a0
  nops 16
;   LDA #$2B   ; #$2B
;   jsr @store_vm_add_h_to_range ; STA VMADDH ; PpuAddr_2006
;   LDA #$E8
;   STA VMADDL ; PpuAddr_2006
;   LDA #$55
;   LDX #$18
; : STA VMDATAL ; PpuData_2007
;   DEX
;   BNE :-


.byte $20, $27
.byte $ED, $A9, $03, $20, $B8, $F6, $A9, $1B, $20, $C6, $FE, $20, $BD, $EC, $20, $80
.byte $FC, $20, $B9, $FC, $A9, $00, $AA, $9D, $AB, $06, $9D, $B7, $06, $E8, $E0, $0C
.byte $90, $F5, $A9, $02, $8D, $B1, $06, $8D, $BD, $06, $A9, $01, $85, $30, $A9, $00
.byte $8D, $27, $05, $20, $DE, $E8, $20, $3D, $FD, $A5, $F7, $25, $F5, $29, $20, $F0
.byte $0F, $EE, $27, $05, $AD, $27, $05, $C9, $04, $90, $05, $A9, $00, $8D, $27, $05
.byte $20, $80, $FC, $20, $6A, $FE, $20, $14, $FE, $A2, $00, $A0, $00, $A9, $00, $CC
.byte $27, $05, $D0, $02, $A9, $FC

; E2f6
  PHA
  LDA $E347,X
  jsr @store_vm_add_h_to_range ; STA VMADDH ; PpuAddr_2006
  LDA $E346,X
  STA VMADDL ; PpuAddr_2006
  PLA
  STA VMDATAL ; PpuData_2007


; E300 - bank 7
.byte $C8, $E8, $E8, $E0, $08, $90, $DF, $20, $6D
.byte $EC, $A5, $F7, $29, $10, $D0, $03, $4C, $C6, $E2, $AD, $27, $05, $0A, $6D, $27
.byte $05, $A8, $A2, $00, $B9, $4E, $E3, $95, $30, $C8, $E8, $E0, $03, $90, $F5, $C6
.byte $33, $A5, $32, $F0, $0B, $A9, $04, $8D, $AB, $06, $8D, $B7, $06, $4C, $5A, $E3
.byte $20, $A8, $E7, $4C, $5F, $E4, $88

.byte $2A, $C8          
.byte $2A, $08          
.byte $2B, $48          
.byte $2B, $01, $00     
.byte $00, $02, $00, $00, $01, $00, $01, $02, $00, $01, $20, $6A, $FE, $A9, $01, $85
.byte $3E, $A9, $04, $85, $3D, $20, $95, $FC, $20, $16, $E9, $20, $03, $E9, $20, $14
.byte $FE, $A9, $06, $20, $EE, $FE, $A9, $08, $20, $9E, $FE, $A9, $2A, $8D, $F5, $04
.byte $A5, $30, $38, $E9, $01, $49, $01, $18, $69, $05, $20, $5A, $C2, $20, $27, $ED
.byte $A9, $1F, $20, $C6, $FE, $A9, $00, $85, $FD, $A9, $08, $85, $FC, $A9, $02, $85
.byte $3C, $20, $6D, $EC, $A9, $10, $85, $9A, $A9, $23, $85, $A2, $A9, $00, $85, $62
.byte $85, $7A, $85, $8A, $85, $92, $85, $DB, $85, $DC, $A9, $F8, $85, $DD, $A9, $FF
.byte $85, $DE, $20, $80, $FC, $20, $9F, $FC, $A9, $00, $8D, $27, $05, $20, $3D, $FD
.byte $A5, $F5, $29, $0F, $A8, $B9, $3D, $E4, $18, $6D, $27, $05, $8D, $27, $05, $30
.byte $0B, $38, $E9, $03, $30, $10, $C9, $03, $90, $0C, $B0, $03, $18, $69, $03, $A8
.byte $B9, $4D, $E4, $8D, $27, $05, $AD, $27, $05, $0A, $A8, $B9, $53, $E4, $85, $5A


; E400 - bank 7
.byte $B9, $54, $E4, $85, $72, $A9, $00, $85, $49, $20, $9E, $FA, $A9, $FC, $8D, $03
.byte $05, $20, $B1, $FA, $20, $ED, $E8, $20, $C9, $ED, $20, $80, $FC, $20, $6A, $FE
.byte $20, $14, $FE, $20, $8E, $EE, $20, $6D, $EC, $A5, $F5, $29, $C0, $D0, $03, $4C
.byte $CD, $E3, $AD, $27, $05, $8D, $AD, $06, $C6, $33, $4C, $5F, $E4, $00, $01, $FF
.byte $00, $03, $00, $00, $00, $FD, $00, $00, $00, $00, $00, $00, $00, $03, $04, $05
.byte $00, $01, $02, $40, $70, $80, $70, $C0, $70, $40, $20, $80, $20, $C0, $20, $20
.byte $6A, $FE, $A2, $49, $20, $B2, $E8, $20, $BD, $E8, $20, $6A, $FE, $A5, $FE, $29
.byte $FD, $85, $FE, $20, $95, $FC, $20, $03, $E9, $20, $16, $E9, $20, $67, $F4, $A5
.byte $32, $F0, $0C, $A9, $1F, $20, $C6, $FE, $A5, $3F, $18, $69, $07, $D0, $21, $A5
.byte $33, $F0, $4E, $A5, $47, $30, $4A, $A5, $3E, $05, $3F, $D0, $44, $A9, $26, $20
.byte $E1, $FB, $A5, $3D, $4A, $18, $69, $1C, $20, $C6, $FE, $A5, $3D, $18, $69, $01
.byte $20, $5A, $C2, $20, $27, $ED, $20, $BD, $EC, $20, $03, $E9, $20, $80, $FC, $20
.byte $14, $FE, $20, $9F, $FC, $A9, $40, $8D, $00, $01, $20, $5E, $FE, $A9, $56, $20
.byte $2D, $FE, $20, $6A, $FE, $20, $95, $FC, $20, $16, $E9, $20, $03, $E9, $20, $14
.byte $FE, $20, $F0, $98, $A5, $47, $09, $10, $85, $47, $20, $24, $99, $AD, $FD, $04
.byte $8D, $FE, $04, $20, $9E, $FE, $AD, $F5, $04, $8D, $F7, $04, $A9, $99, $8D, $05


; E500 - bank 7
.byte $05, $A9, $01, $8D, $06, $05, $20, $03, $E9, $20, $E3, $EC, $20, $80, $FC, $20
.byte $14, $FE, $20, $6A, $FE, $20, $5D, $F5, $20, $09, $C3, $20, $27, $ED, $20, $08
.byte $EC, $20, $6D, $EC

  LDA RDNMI ; $2002
  LDA RDNMI ; $2002


.byte $20, $9F, $FC, $A9, $C0, $8D
.byte $00, $01, $20, $5E, $FE, $A9, $00, $8D, $07, $01, $A9, $00, $8D, $02, $05, $A5
.byte $33, $F0, $39, $A5, $3D, $0A, $A8, $B9, $61, $E5, $85, $25, $B9, $62, $E5, $85
.byte $26, $A4, $3E, $A5, $32, $F0, $02, $A4, $3F, $B1, $25, $20, $E1, $FB, $4C, $7C
.byte $E5, $6B, $E5, $6D, $E5, $6E, $E5, $72, $E5, $76, $E5, $28, $28, $24, $25, $22
.byte $21, $28, $27, $21, $20, $2B, $20, $28, $24, $21, $22, $27, $20, $F8, $FB, $AD
.byte $02, $05, $29, $01, $D0, $24, $20, $3D, $FD, $AD, $33, $00, $F0, $1C, $A5, $F5
.byte $29, $10, $F0, $16, $0A, $45, $48, $85, $48, $29, $20, $F0, $08, $A9, $1F, $20
.byte $E1, $FB, $4C, $AA, $E5, $A9, $FF, $20, $E1, $FB, $A5, $48, $29, $20, $F0, $08
.byte $A0, $02, $20, $1F, $FE, $4C, $0B, $E6, $AD, $02, $05, $29, $01, $D0, $34, $A9
.byte $FC, $8D, $03, $05, $A9, $00, $8D, $1E, $05, $A5, $3D, $C9, $03, $D0, $0C, $A5
.byte $3E, $C9, $03, $D0, $06, $20, $8D, $E8, $4C, $0B, $E6, $20, $17, $FC, $20, $09
.byte $FC, $20, $AA, $8A, $20, $80, $D0, $20, $2A, $E9, $20, $E6, $EA, $20, $1B, $CD
.byte $4C, $0B, $E6, $20, $08, $EC, $A5, $32, $D0, $0B, $A9, $FF, $20, $F5, $C7, $20


; E600 - bank 7
.byte $4E, $B7, $20, $0E, $F3, $20, $F8, $F7, $20, $B1, $FA

  BIT RDNMI ; $2002
  NOP
  NOP ; BPL :-    ; BVC :-

.byte $20, $79, $EC, $A5, $48, $29, $20, $D0, $38, $AD, $02, $05, $29, $01, $D0, $2E
.byte $A5, $32, $D0, $21, $AD, $01, $05, $4A, $29, $03, $D0, $06, $20, $27, $F6, $4C
.byte $45, $E6, $C9, $01, $D0, $07, $0A, $20, $27, $F6, $4C, $45, $E6, $C9, $02, $D0
.byte $04, $0A, $20, $27, $F6, $20, $61, $C4, $20, $C9, $ED, $4C, $51, $E6, $20, $ED
.byte $E8, $A9, $01, $8D, $07, $01, $AD, $07, $01, $D0, $FB, $EE, $02, $05, $AD, $02
.byte $05, $29, $01, $F0, $03, $4C, $7C, $E5, $20, $24, $A4, $A5, $47, $29, $E8, $D0
.byte $03, $4C, $7C, $E5, $30, $52, $C9, $40, $D0, $03, $4C, $2A, $E7, $C9, $20, $D0
.byte $14, $A5, $48, $09, $80, $85, $48, $AD, $96, $03, $29, $7F, $8D, $96, $03, $20
.byte $24, $99, $4C, $7C, $E5, $A9, $00, $20, $E1, $FB, $20, $6A, $FE, $20, $95, $FC
.byte $A5, $3E, $D0, $1C, $A9, $2A, $20, $E1, $FB, $A9, $40, $8D, $00, $01, $20, $5E
.byte $FE, $A9, $20, $20, $2D, $FE, $20, $6A, $FE, $A9, $C0, $8D, $00, $01, $D0, $05
.byte $A9, $10, $20, $2D, $FE, $4C, $69, $E7, $A9, $00, $8D, $01, $05, $A5, $32, $D0
.byte $06, $C6, $43, $A5, $43, $30, $24, $A9, $00, $20, $E1, $FB, $A9, $00, $20, $85
.byte $E7, $A5, $32, $D0, $26, $A5, $33, $D0, $03, $4C, $AB, $E1, $20, $B5, $A3, $A5
.byte $47, $29, $80, $85, $47, $20, $4B, $F4, $4C, $73, $E7, $A5, $33, $C9, $FE, $F0


; E700 - bank 7
.byte $22, $A9, $02, $20, $B8, $F6, $A9, $00, $8D, $01, $05, $A9, $29, $20, $E1, $FB
.byte $A9, $00, $20, $85, $E7, $A9, $00, $20, $85, $E7, $A9, $00, $20, $E1, $FB, $A5
.byte $32, $D0, $04, $C6, $30, $D0, $55, $4C, $1A, $E2, $A9, $00, $20, $E1, $FB, $A9
.byte $00, $85, $3F, $E6, $3E, $A6, $3D, $A5, $3E, $DD, $6F, $E7, $90, $21, $E6, $3D
.byte $A9, $00, $85, $3E, $A9, $2A, $20, $E1, $FB, $A9, $00, $8D, $01, $05, $20, $85
.byte $E7, $A9, $00, $20, $85, $E7, $A9, $00, $20, $E1, $FB, $A9, $00, $85, $47, $A5
.byte $3D, $C9, $04, $D0, $04, $A9, $00, $85, $3D, $20, $4B, $F4, $4C, $5F, $E4, $02
.byte $01, $04, $04, $A5, $30, $C9, $02, $B0, $03, $4C, $5F, $E4, $A5, $31, $49, $01
.byte $85, $31, $4C, $5F, $E4, $20, $F8, $FB, $20, $E4, $C6, $A0, $05, $20, $1F, $FE

  BIT RDNMI
  NOP
  NOP


.byte $20, $79, $EC, $A9, $01, $8D, $07, $01, $AD, $07, $01
.byte $D0, $FB, $EE, $01, $05, $D0, $DE, $60, $20, $6A, $FE, $A9, $00, $85, $3D, $85
.byte $3E, $A2, $49, $20, $B2, $E8, $20, $BD, $E8, $A5, $FE, $29, $FD, $85, $FE, $20
.byte $95, $FC, $20, $03, $E9, $20, $16, $E9, $20, $F0, $98, $A9, $07, $8D, $FD, $04
.byte $8D, $FE, $04, $20, $9E, $FE, $A9, $2C, $8D, $F5, $04, $A9, $99, $8D, $05, $05
.byte $A9, $01, $8D, $06, $05, $20, $03, $E9, $A9, $00, $85, $32, $20, $E3, $EC, $20
.byte $80, $FC, $20, $14, $FE, $20, $6A, $FE, $A9, $00, $85, $43, $20, $5D, $F5, $20


; E800 - bank 7
.byte $09, $C3, $20, $27, $ED, $20, $08, $EC, $20, $6D, $EC

  LDA RDNMI ; PpuStatus_2002
  LDA RDNMI ; PpuStatus_2002
 
.byte $20, $9F, $FC, $A9, $C0, $8D, $00, $01, $20, $5E, $FE, $A9, $00, $8D, $07
.byte $01, $A9, $00, $8D, $02, $05, $85, $47, $A9, $00, $8D, $F4, $04, $20, $F8, $FB
.byte $AD, $02, $05, $29, $01, $D0, $26, $A9, $FC, $8D, $03, $05, $A9, $00, $8D, $1E
.byte $05, $20, $3D, $FD, $A9, $02, $20, $EE, $FE, $20, $00, $B3, $20, $03, $B3, $20
.byte $06, $B3, $20, $09, $B3, $A9, $06, $20, $EE, $FE, $4C, $60, $E8, $20, $B1, $FA

; E860
  LDA RDNMI ; PpuStatus_2002
  nop
  nop ; BPL :-    ; BVC :-
.byte $20, $79, $EC, $AD, $02, $05, $29, $01, $F0, $06, $20
.byte $ED, $E8, $4C, $78, $E8, $20, $61, $C4, $A9, $01, $8D, $07, $01, $AD, $07, $01
.byte $D0, $FB, $EE, $02, $05, $A5, $47, $30, $03, $4C, $2D, $E8, $60, $A9, $02, $20
.byte $EE, $FE, $20, $0C, $B3, $A9, $06, $20, $EE, $FE, $60, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $A2, $00, $A9, $00, $9D, $00, $00, $E8, $E0, $F1, $90, $F8, $60, $A9, $00, $85
.byte $25, $A9, $03, $85, $26, $A2, $00, $A9, $00, $81, $25, $E6, $25, $D0, $02, $E6
.byte $26, $A5, $26, $C9, $04, $D0, $F0, $A5, $25, $C9, $F4, $D0, $EA, $60, $A9, $00
.byte $AA, $9D, $C3, $06, $9D, $E1, $06, $E8, $E0, $1E, $90, $F5, $60, $AE, $03, $05
.byte $F0, $10, $A9, $F0, $E0, $04, $F0, $0A, $9D, $00, $02, $CA, $CA, $CA, $CA, $4C


; E900 - bank 7
.byte $F4, $E8, $60, $A2, $FC, $A9, $F0, $9D, $00, $02, $E0, $00, $F0, $07, $CA, $CA
.byte $CA, $CA, $4C, $07, $E9, $60

; e916 - zeros out VM
  jslb clear_bg_vm_jsl, $a0
  nops 15
;   LDA #$20
;   LDY #$00
;   LDX #$00
;   JSR $FCD2
;   LDA #$24
;   JSR $FCD2
;   LDA #$28
;   JSR $FCD2
  RTS

.byte $A5, $47, $29, $01, $F0, $01
.byte $60, $A5, $32, $F0, $03, $4C, $F8, $E9, $A5, $5A, $38, $E5, $DB, $85, $15, $A5
.byte $62, $E5, $DC, $85, $16, $30, $14, $D0, $26, $A9, $40, $85, $18, $24, $DA, $10
.byte $02, $A9, $10, $85, $18, $A5, $15, $C5, $18, $B0, $0C, $A2, $5A, $A0, $00, $24
.byte $DA, $10, $0E, $A0, $06, $D0, $0A, $A5, $15, $C9, $B8, $90, $0E, $A2, $5A, $A0
.byte $03, $20, $64, $EA, $A2, $00, $A0, $00, $20, $A3, $EA, $A5, $8A, $85, $27, $A5
.byte $92, $85, $28, $AD, $8E, $03, $10, $0F, $AD, $58, $03, $30, $0A, $AD, $40, $03
.byte $85, $27, $AD, $48, $03, $85, $28, $A5, $72, $18, $65, $27, $85, $27, $A5, $7A
.byte $65, $28, $85, $28, $A5, $27, $38, $E5, $DD, $85, $15, $A5, $28, $E5, $DE, $30
.byte $33, $D0, $13, $A9, $70, $85, $18, $20, $42, $EA, $90, $04, $A9, $40, $85, $18
.byte $A5, $15, $C5, $18, $B0, $0B, $A0, $00, $20, $42, $EA, $90, $20, $A0, $06, $D0
.byte $1C, $A9, $90, $85, $18, $20, $58, $EA, $90, $04, $A9, $60, $85, $18, $A5, $15
.byte $C5, $18, $90, $13, $A0, $03, $20, $58, $EA, $90, $02, $A0, $09, $20, $82, $EA
.byte $A2, $02, $A0, $01, $20, $A3, $EA, $60, $A5, $5A, $38, $E5, $5B, $85, $25, $A5


; EA00 - bank 7
.byte $62, $E5, $63, $85, $26, $18, $10, $01, $38, $66, $26, $66, $25, $A5, $5A, $38
.byte $E5, $25, $85, $25, $A5, $62, $E5, $26, $85, $26, $A5, $25, $38, $E9, $80, $85
.byte $25, $A5, $26, $E9, $00, $85, $26, $A9, $FE, $85, $15, $A5, $DB, $38, $E5, $25
.byte $A5, $DC, $E5, $26, $10, $04, $A9, $02, $85, $15, $A2, $00, $A0, $00, $20, $A3
.byte $EA, $60, $A5, $3D, $C9, $02, $F0, $02, $D0, $0E, $A5, $3E, $C9, $01, $D0, $06
.byte $A5, $28, $F0, $02, $38, $60, $18, $60, $A5, $3D, $C9, $03, $D0, $F8, $A5, $3E
.byte $D0, $F4, $F0, $EC, $B5, $00, $38, $F9, $79, $EA, $85, $25, $B5, $08, $F9, $7A
.byte $EA, $85, $26, $B9, $7B, $EA, $85, $15, $60, $40, $00, $FE, $C0, $00, $02, $10
.byte $00, $FE, $A5, $27, $38, $F9, $97, $EA, $85, $25, $A5, $28, $F9, $98, $EA, $85
.byte $26, $B9, $99, $EA, $85, $15, $60, $70, $00, $FC, $90, $00, $04, $40, $00, $FC
.byte $60, $00, $04, $A5, $15, $18, $08, $75, $DB, $95, $DB, $B5, $DC, $69, $00, $28
.byte $10, $02, $69, $FF, $95, $DC, $B5, $DB, $38, $E5, $25, $85, $17, $B5, $DC, $E5
.byte $26, $10, $0F, $48, $A5, $17, $49, $FF, $18, $69, $01, $85, $17, $68, $49, $FF
.byte $69, $00, $D0, $0F, $B9, $E4, $EA, $C5, $17, $90, $08, $A5, $25, $95, $DB, $A5
.byte $26, $95, $DC, $60, $02, $04, $A9, $00, $AA, $A8, $D0, $0A, $A5, $DA, $10, $06
.byte $20, $D0, $EB, $4C, $FB, $EA, $20, $7D, $EB, $30, $11, $C8, $C8, $C0, $02, $D0


; EB00 - bank 7
.byte $06, $A5, $47, $29, $02, $D0, $08, $20, $7D, $EB, $30, $03, $20, $A8, $EB, $E8
.byte $E8, $98, $29, $FC, $18, $69, $04, $C9, $08, $90, $CE, $A5, $47, $29, $02, $F0
.byte $28, $A5, $DB, $8D, $07, $05, $A5, $DC, $8D, $08, $05, $A5, $DB, $38, $ED, $09
.byte $05, $A5, $DC, $ED, $0A, $05, $90, $12, $A5, $47, $29, $FD, $85, $47, $A0, $07
.byte $B9, $0F, $05, $99, $07, $05, $88, $10, $F7, $60, $24, $DA, $50, $2E, $A5, $5A
.byte $38, $ED, $0F, $05, $85, $15, $A5, $62, $ED, $10, $05, $90, $1F, $A5, $15, $C9
.byte $18, $90, $19, $A5, $DA, $29, $BF, $09, $80, $85, $DA, $A5, $47, $29, $FD, $85
.byte $47, $A0, $07, $B9, $0F, $05, $99, $07, $05, $88, $10, $F7, $60, $B9, $07, $05
.byte $38, $F9, $A0, $EB, $85, $25, $B9, $08, $05, $F9, $A1, $EB, $85, $26, $B0, $06
.byte $A9, $00, $85, $25, $85, $26, $B5, $DB, $38, $E5, $25, $B5, $DC, $E5, $26, $60
.byte $00, $00, $00, $01, $00, $00, $F0, $00, $A5, $25, $95, $DB, $A5, $26, $95, $DC
.byte $98, $29, $02, $F0, $1A, $A5, $25, $38, $F9, $05, $05, $A5, $26, $F9, $06, $05
.byte $F0, $0D, $B5, $DB, $38, $E9, $01, $95, $DB, $B5, $DC, $E9, $00, $95, $DC, $60
.byte $A5, $DB, $38, $ED, $07, $05, $85, $00, $A5, $DC, $ED, $08, $05, $B0, $18, $C9
.byte $FF, $D0, $06, $A5, $00, $C9, $FC, $B0, $0E, $A5, $DB, $18, $69, $02, $85, $DB
.byte $A5, $DC, $69, $00, $85, $DC, $60, $AD, $07, $05, $85, $DB, $AD, $08, $05, $85


; EC00 - bank 7
.byte $DC, $A5, $DA, $29, $7F, $85, $DA, $60, $A5, $DD, $85, $25, $A5, $DE, $85, $26
.byte $A2, $00, $A5, $25, $38, $E9, $F0, $85, $25, $A5, $26, $E9, $00, $85, $26, $90
.byte $03, $E8, $D0, $EE, $A5, $DD, $85, $25, $A5, $DE, $85, $26, $E0, $00, $F0, $10
.byte $A9, $10, $18, $65, $25, $85, $25, $A5, $26, $69, $00, $85, $26, $CA, $D0, $F0
.byte $A5, $25, $38, $E9, $01, $85, $25, $A5, $26, $E9, $00, $85, $26, $A5, $25, $49
.byte $FF, $85, $25, $F0, $05, $38, $E9, $10, $85, $25, $A5, $25, $85, $FC, $A5, $26
.byte $29, $01, $0A, $85, $3C, $A5, $DB, $38, $E5, $39, $85, $FD, $60, $A5, $FF, $29
.byte $FC, $05, $3C, $85, $FF, $20, $BF, $FC, $60

; ec79 - This appears to be setting the scroll for the HUD
; we'll likely end up doing this in a different way
  RTS

  nops 21

  ; stealing a bunch of nops here for audio
  @audio_hijack_1:

.if ENABLE_MSU = 1
  jslb msu_check, $b2
.endif
.if ENABLE_MSU = 0
  nops 4
.endif
  CMP #$EE
  BNE :+
  RTS
: 
  STA $0500
  LDA $0104
  PHA
  ; bank switch to bank 5 for audio

  LDA #$05
  JSR $FEEE
; audio take-over
  LDA $0500
    ; do original audio
    JSR $8000
    ; convert and run our audio in the 2A03
    jslb convert_audio, $a0

    ; bank switch back
    PLA
    JSR $FEEE
    RTS

  @audio_hijack_2:
    JSR $8003
    jslb convert_audio, $a0
    JMP @audio_hijack_2_return

;   LDA $3B
;   AND #$01
;   BEQ :+
;   LDA #$23
;   STA VMADDH ; $2006
;   LDA #$20
;   STA VMADDL ; $2006
;   LDA #$00
;   STA PpuScroll_2005
;   LDA #$D0
;   STA PpuScroll_2005

;   LDA $FF
;   AND #$FC
;   STA PpuControl_2000
;   STA $FF

;   RTS

; ; ec9d
; : LDA #$2B
;   STA VMADDH ; PpuAddr_2006
;   LDA #$20
;   STA VMADDL ; PpuAddr_2006
;   LDA #$00
;   STA PpuScroll_2005
;   LDA #$D0
;   STA PpuScroll_2005

;   LDA $FF
;   AND #$FC
;   ORA #$02
;   STA PpuControl_2000
;   STA $FF
  
;   RTS

.byte $A9, $00, $85
.byte $DB, $85, $DC, $85, $DD, $85, $DE, $20, $08, $EC, $20, $6D, $EC, $60, $A9, $00
.byte $85, $DB, $85, $DC, $A9, $04, $85, $DD, $A9, $00, $85, $DE, $20, $08, $EC, $20
.byte $6D, $EC, $60, $A9, $C3, $8D, $00, $02, $A9, $FF, $8D, $01, $02, $A9, $23, $8D
.byte $02, $02, $A9, $FA, $8D, $03, $02, $A5, $3D, $C9, $04, $D0, $06, $A9, $BA, $8D


; ED00 - bank 7
.byte $00, $02, $60, $A9, $BF, $8D, $04, $02, $A9, $FE, $8D, $05, $02, $A9, $00, $8D
.byte $06, $02, $A9, $F6, $8D, $07, $02, $60, $AD, $FD, $04, $CD, $FE, $04, $8D, $FE
.byte $04, $F0, $03, $20, $9E, $FE, $60


; ED27
  PHA
  TXA
  PHA
  TYA
  PHA
  LDA $FF
  PHA
  JSR $FC80
; this is where NMI returns us to (sometimes)  
  PLA
;   STA $2000
;   STA $FF
  jslb restore_ppu_control_from_a, $a0
  nops 1

  LDA $04F4
  ASL
  TAX
  LDA $EECE,X
  STA $02
  LDA $EECF,X
  STA $03
  JSR $ED65
  LDA $04F5
  ASL
  TAX
  LDA $EF18,X
  STA $02
  LDA $EF19,X
  STA $03
  JSR $ED8C
  JSR $FCBF
  PLA
  TAY
  PLA
  TAX
  PLA
  RTS

; ED65 - Palette writing
;   LDA #$3F
;   STA VMADDH ; PpuAddr_2006
;   LDA #$00
;   STA VMADDL ; PpuAddr_2006
;   LDY #$00
; : LDA ($02),Y
;   STA VMDATAL ; PpuData_2007
;   INY
;   CPY #$10
;   BCC :-
  STZ PALETTE_OFFSET
  LDA #$10
  STA PALETTE_ENTRY_CNT
  jslb write_palette_data, $a0
  nops 10
  


@ed7b:
  LDA #$3F
  STA VMADDH ; PpuAddr_2006
  LDA #$00
  STA VMADDL ; PpuAddr_2006
  STA VMADDH ; PpuAddr_2006
  STA VMADDL ; PpuAddr_2006
  RTS

; ED8C - More Palette Writing
  LDA #$3F
  STA VMADDH ; PpuAddr_2006
  LDA #$10
  STA VMADDL ; PpuAddr_2006
  LDA $04F5
  CMP #$24
  BCS :+

  LDA #$10                                      ; 2
  STA PALETTE_OFFSET                            ; 3
  jslb write_8_palette_entries_from_f1b6, $a0   ; 4 = 9
  nops 2                                        ; using 2 below
;   LDY #$00                    13 bytes
; : LDA $F1B6,Y
;   STA VMDATAL ; PpuData_2007
;   INY
;   CPY #$08
;   BCC :-

  LDA #$14                     ; 2
  STA PALETTE_OFFSET           ; 3
  LDA #$08                     ; 2
  STA PALETTE_ENTRY_CNT        ; 3
  jslb write_palette_data, $a0 ; 4 = 14

;   LDY #$00                     12 bytes 
; : LDA ($02),Y
;   STA VMDATAL ; PpuData_2007
;   INY
;   CPY #$08
;   BCC :-
  
;   LDA #$18    
;   STA PALETTE_OFFSET
;   LDA #$08  
;   STA PALETTE_ENTRY_CNT
;   jslb write_palette_data, $a0

  BCS @ed7b

: 
;   LDY #$00
; : LDA ($02),Y
;   STA VMDATAL ; PpuData_2007
;   INY
;   CPY #$10
;   BCC :-
  LDA #$10
  STA PALETTE_OFFSET
  STA PALETTE_ENTRY_CNT
  jslb write_palette_data, $a0

  BCS @ed7b

.byte $4C, $5B, $EE, $A5, $3D, $0A, $A8, $B9, $5C, $EE
.byte $85, $25, $B9, $5D, $EE, $85, $26, $F0, $ED, $A5, $3E, $0A, $A8, $B1, $25, $AA
.byte $C8, $B1, $25, $F0, $76, $C8, $85, $26, $86, $25, $A0, $00, $EE, $F9, $04, $B1
.byte $25, $C8, $CD, $F9, $04, $B0, $08, $A9, $00, $8D, $F9, $04, $EE, $FA, $04, $B1


; EE00 - bank 7
.byte $25, $C8, $CD, $FA, $04, $B0, $05, $A9, $00, $8D, $FA, $04, $AD, $FB, $04, $D0
.byte $1F, $B1, $25, $F0, $25, $AD, $01, $05, $4A, $29, $07, $D0, $1D, $20, $EF, $FD
.byte $29, $0F, $C9, $04, $B0, $14, $A9, $01, $8D, $FB, $04, $A9, $08, $8D, $FC, $04
.byte $CE, $FC, $04, $D0, $05, $A9, $00, $8D, $FB, $04, $C8, $98, $18, $6D, $FA, $04
.byte $A8, $B1, $25, $8D, $F4, $04, $AD, $FB, $04, $F0, $10, $AD, $FC, $04, $C9, $03
.byte $90, $09, $AD, $F4, $04, $38, $E9, $02, $8D, $F4, $04, $60, $66, $EE, $00, $00
.byte $6A, $EE, $00, $00, $72, $EE, $00, $00, $78, $EE, $00, $00, $00, $00, $7E, $EE
.byte $00, $00, $00, $00, $83, $EE, $89, $EE, $0B, $02, $00, $04, $03, $02, $04, $01
.byte $01, $0C, $0D, $08, $02, $00, $18, $19, $1A, $18, $01, $00, $1C, $1D, $A9, $00
.byte $8D, $F8, $04, $AD, $F4, $04, $CD, $F6, $04, $8D, $F6, $04, $F0, $12, $0A, $AA
.byte $BD, $CE, $EE, $85, $02, $BD, $CF, $EE, $85, $03, $20, $65, $ED, $CE, $F8, $04
.byte $AD, $F5, $04, $CD, $F7, $04, $8D, $F7, $04, $F0, $12, $0A, $AA, $BD, $18, $EF
.byte $85, $02, $BD, $19, $EF, $85, $03, $20, $8C, $ED, $CE, $F8, $04, $60, $76, $EF
.byte $86, $EF, $A6, $EF, $B6, $EF, $C6, $EF, $D6, $EF, $E6, $EF, $F6, $EF, $06, $F0
.byte $16, $F0, $26, $F0, $36, $F0, $46, $F0, $56, $F0, $66, $F0, $76, $F0, $86, $F0
.byte $96, $F0, $A6, $F0, $B6, $F0, $C6, $F0, $06, $F1, $16, $F1, $26, $F1, $36, $F1


; EF00 - bank 7
.byte $46, $F1, $56, $F1, $66, $F1, $16, $F1, $76, $F1, $86, $F1, $96, $F1, $A6, $F1
.byte $96, $EF, $D6, $F0, $E6, $F0, $F6, $F0, $BE, $F1, $C6, $F1, $CE, $F1, $D6, $F1
.byte $DE, $F1, $E6, $F1, $EE, $F1, $C6, $F1, $F6, $F1, $06, $F2, $FE, $F1, $06, $F2
.byte $0E, $F2, $16, $F2, $1E, $F2, $06, $F2, $E6, $F1, $EE, $F1, $26, $F2, $C6, $F1
.byte $06, $F2, $DE, $F1, $2E, $F2, $BE, $F1, $EE, $F1, $16, $F2, $FE, $F1, $D6, $F1
.byte $E6, $F1, $36, $F2, $3E, $F2, $46, $F2, $4E, $F2, $56, $F2, $5E, $F2, $66, $F2
.byte $6E, $F2, $7E, $F2, $8E, $F2, $9E, $F2, $AE, $F2, $BE, $F2, $CE, $F2, $DE, $F2
.byte $EE, $F2, $FE, $F2, $B6, $F0, $0F, $30, $10, $00, $0F, $28, $18, $08, $0F, $37
.byte $27, $17, $0F, $3A, $1A, $0C, $0F, $30, $10, $00, $0F, $28, $18, $08, $0F, $37
.byte $27, $17, $0F, $2A, $1A, $0A, $0F, $30, $10, $00, $0F, $28, $18, $08, $0F, $2C
.byte $1C, $0C, $0F, $2A, $1A, $0A, $0F, $37, $27, $17, $0F, $20, $10, $00, $0F, $2C
.byte $1C, $0C, $0F, $26, $17, $07, $0F, $37, $27, $17, $0F, $20, $10, $00, $0F, $1C
.byte $0C, $2C, $0F, $26, $17, $07, $0F, $37, $27, $17, $0F, $20, $10, $00, $0F, $0C
.byte $2C, $1C, $0F, $26, $17, $07, $0F, $26, $16, $06, $0F, $28, $20, $18, $0F, $20
.byte $10, $00, $0F, $21, $12, $01, $0F, $26, $16, $06, $0F, $2C, $1C, $0C, $0F, $20
.byte $10, $00, $0F, $21, $12, $01, $0F, $28, $1A, $0A, $0F, $28, $18, $08, $0F, $24


; F000 - bank 7
.byte $14, $04, $0F, $27, $17, $07, $0F, $28, $1A, $0A, $0F, $28, $18, $08, $0F, $24
.byte $14, $04, $0F, $28, $18, $02, $0F, $24, $14, $04, $0F, $30, $28, $16, $0F, $25
.byte $15, $05, $0F, $20, $26, $16, $0F, $30, $26, $16, $0F, $27, $17, $07, $0F, $30
.byte $21, $12, $0F, $0F, $16, $06, $0F, $30, $26, $16, $0F, $27, $17, $07, $0F, $12
.byte $21, $30, $0F, $0F, $06, $07, $0F, $30, $26, $16, $0F, $2C, $1C, $0C, $0F, $21
.byte $12, $02, $0F, $0F, $16, $06, $0F, $30, $26, $16, $0F, $2C, $1C, $0C, $0F, $02
.byte $12, $21, $0F, $0F, $06, $07, $0F, $20, $10, $00, $0F, $24, $14, $04, $0F, $28
.byte $18, $08, $0F, $38, $16, $06, $0F, $10, $00, $0C, $0F, $20, $10, $00, $0F, $30
.byte $26, $16, $0F, $00, $28, $16, $0F, $28, $18, $08, $0F, $0C, $17, $07, $0F, $2B
.byte $1C, $0C, $0F, $20, $12, $02, $0F, $21, $12, $02, $0F, $2C, $1C, $0C, $0F, $18
.byte $16, $08, $0F, $28, $18, $08, $0F, $25, $15, $05, $0F, $2C, $1C, $0C, $0F, $18
.byte $16, $08, $0F, $28, $18, $08, $0F, $20, $25, $1A, $0F, $27, $17, $07, $0F, $22
.byte $12, $02, $0F, $20, $2C, $0C, $0F, $26, $16, $06, $0F, $1A, $17, $06, $0F, $27
.byte $17, $06, $0F, $30, $38, $28, $0F, $16, $06, $0F, $0F, $0A, $06, $0F, $0F, $17
.byte $06, $0F, $0F, $27, $17, $07, $0F, $06, $0F, $0F, $0F, $06, $0F, $0F, $0F, $06
.byte $0F, $0F, $0F, $17, $06, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F, $0F


; F100 - bank 7
.byte $0F, $0F, $0F, $0F, $0F, $0F, $0F, $06, $16, $30, $0F, $12, $02, $30, $0F, $28
.byte $18, $08, $0F, $08, $1A, $0A, $0F, $26, $16, $06, $0F, $30, $2A, $1A, $0F, $38
.byte $28, $07, $0F, $30, $36, $26, $0F, $28, $18, $08, $0F, $0F, $0F, $0F, $0F, $0F
.byte $0F, $0F, $0F, $0F, $0F, $0F, $0F, $27, $16, $06, $0F, $20, $27, $17, $0F, $30
.byte $21, $12, $0F, $30, $28, $1C, $0F, $27, $16, $06, $0F, $20, $27, $17, $0F, $21
.byte $12, $30, $0F, $30, $28, $1C, $0F, $27, $16, $06, $0F, $20, $27, $17, $0F, $12
.byte $30, $21, $0F, $30, $28, $1C, $0F, $27, $16, $06, $0F, $20, $27, $17, $0F, $26
.byte $18, $08, $0F, $36, $26, $17, $0F, $16, $06, $0F, $0F, $30, $2A, $1A, $0F, $38
.byte $28, $07, $0F, $36, $26, $16, $0F, $16, $06, $0F, $0F, $30, $2A, $1A, $0F, $0F
.byte $0F, $0F, $0F, $36, $26, $16, $0F, $26, $16, $06, $0F, $30, $2A, $1A, $0F, $18
.byte $08, $0F, $0F, $30, $36, $26, $0F, $26, $16, $0F, $0F, $30, $2A, $1A, $0F, $28
.byte $18, $07, $0F, $36, $26, $16, $0F, $0F, $16, $26, $0F, $0F, $12, $26, $0F, $0F
.byte $17, $38, $0F, $0F, $21, $30, $0F, $0F, $14, $37, $0F, $0F, $16, $37, $0F, $0F
.byte $17, $36, $0F, $0F, $1C, $17, $0F, $0F, $21, $37, $0F, $0F, $14, $37, $0F, $0F
.byte $17, $27, $0F, $0F, $12, $17, $0F, $0F, $17, $27, $0F, $0F, $1B, $36, $0F, $0F
.byte $16, $35, $0F, $0F, $23, $30, $0F, $0F, $14, $37, $0F, $0F, $10, $30, $0F, $0F


; F200 - bank 7
.byte $14, $37, $0F, $0F, $10, $30, $0F, $0F, $17, $38, $0F, $0F, $21, $30, $0F, $0F
.byte $00, $20, $0F, $0F, $21, $36, $0F, $0F, $26, $37, $0F, $0F, $1A, $26, $0F, $0F
.byte $17, $36, $0F, $0F, $11, $30, $0F, $0F, $1A, $2A, $0F, $0F, $30, $1A, $0F, $0F
.byte $00, $20, $0F, $0F, $21, $36, $0F, $0F, $26, $37, $0F, $0F, $14, $37, $0F, $0F
.byte $27, $38, $0F, $0F, $15, $38, $0F, $20, $10, $00, $0F, $35, $25, $15, $0F, $20
.byte $10, $00, $0F, $28, $18, $08, $0F, $0F, $27, $30, $0F, $0F, $31, $17, $0F, $0F
.byte $17, $38, $0F, $0F, $10, $30, $0F, $0F, $16, $26, $0F, $0F, $16, $26, $0F, $0F
.byte $16, $36, $0F, $0F, $12, $36, $0F, $0F, $26, $37, $0F, $0F, $16, $37, $0F, $0F
.byte $17, $36, $0F, $0F, $12, $36, $0F, $0F, $16, $27, $0F, $0F, $30, $27, $0F, $0F
.byte $17, $36, $0F, $0F, $13, $36, $0F, $0F, $16, $35, $0F, $0F, $1B, $35, $0F, $0F
.byte $26, $36, $0F, $0F, $15, $36, $0F, $0F, $25, $37, $0F, $0F, $12, $37, $0F, $0F
.byte $17, $37, $0F, $0F, $11, $37, $0F, $0F, $16, $36, $0F, $0F, $14, $36, $0F, $0F
.byte $26, $37, $0F, $0F, $11, $26, $0F, $0F, $16, $27, $0F, $0F, $14, $16, $0F, $35
.byte $25, $15, $0F, $35, $25, $15, $0F, $35, $25, $15, $0F, $35, $25, $15, $0F, $0F
.byte $16, $26, $0F, $0F, $12, $26, $0F, $20, $10, $00, $0F, $3C, $2C, $1C, $0F, $0F
.byte $11, $36, $0F, $0F, $16, $36, $0F, $0F, $17, $36, $0F, $0F, $16, $36, $0F, $0F


; F300 - bank 7
.byte $16, $26, $0F, $0F, $12, $26, $0F, $0F, $17, $36, $0F, $0F, $16, $36, $A5, $32
.byte $D0, $18, $A5, $3D, $C9, $03, $D0, $06, $A5, $3E, $C9, $03, $F0, $0C, $AD, $05
.byte $05, $0D, $06, $05, $D0, $05, $A9, $80, $85, $47, $60, $EE, $04, $05, $AD, $04
.byte $05, $C9, $30, $90, $F5, $A9, $00, $8D, $04, $05, $AD, $05, $05, $38, $E9, $01
.byte $8D, $05, $05, $B0, $0B, $A9, $99, $8D, $05, $05, $CE, $06, $05, $4C, $5F, $F3
.byte $AA, $29, $0F, $C9, $0A, $90, $08, $8A, $29, $F0, $09, $09, $8D, $05, $05, $AD
.byte $06, $05, $18, $69, $EA, $8D, $96, $04, $AD, $05, $05, $4A, $4A, $4A, $4A, $18
.byte $69, $EA, $8D, $97, $04, $AD, $05, $05, $29, $0F, $18, $69, $EA, $8D, $98, $04
.byte $60, $A5, $25, $49, $FF, $18, $69, $01, $85, $25, $A5, $26, $49, $FF, $69, $00
.byte $85, $26, $60, $8A, $48, $98, $48, $A9, $00, $85, $2A, $85, $29, $A5, $27, $05
.byte $28, $D0, $06, $85, $25, $85, $26, $F0, $3C, $A2, $10, $26, $25, $26, $26, $CA
.byte $F0, $33, $90, $F7, $A5, $25, $09, $01, $85, $25, $E8, $86, $15, $B0, $05, $38
.byte $26, $25, $26, $26, $26, $29, $26, $2A, $A6, $29, $A4, $2A, $A5, $29, $38, $E5
.byte $27, $85, $29, $A5, $2A, $E5, $28, $85, $2A, $B0, $06, $86, $29, $84, $2A, $C6
.byte $25, $C6, $15, $D0, $DA, $68, $A8, $68, $AA, $60, $48, $8A, $48, $A5, $16, $48
.byte $A9, $00, $85, $16, $A2, $10, $26, $25, $26, $26, $26, $16, $A5, $16, $C5, $15


; F400 - bank 7
.byte $90, $04, $E5, $15, $85, $16, $26, $25, $26, $26, $CA, $D0, $ED, $68, $85, $16
.byte $68, $AA, $68, $60, $8A, $48, $98, $48, $A9, $00, $85, $29, $85, $2A, $A5, $26
.byte $05, $25, $F0, $21, $46, $26, $66, $25, $90, $0F, $18, $A5, $29, $65, $27, $85
.byte $29, $A5, $2A, $65, $28, $85, $2A, $B0, $06, $06, $27, $26, $28, $90, $DF, $68
.byte $A8, $68, $AA, $38, $60, $68, $A8, $68, $AA, $18, $60, $20, $83, $F4, $A0, $00
.byte $B9, $3D, $00, $91, $25, $C8, $C0, $0C, $90, $F6, $A0, $00, $B9, $46, $04, $91
.byte $27, $C8, $C0, $1E, $90, $F6, $60, $20, $83, $F4, $A0, $00, $B1, $25, $99, $3D
.byte $00, $C8, $C0, $0C, $90, $F6, $A0, $00, $B1, $27, $99, $46, $04, $C8, $C0, $1E
.byte $90, $F6, $60, $A5, $31, $0A, $0A, $A8, $A2, $00, $B9, $96, $F4, $95, $25, $C8
.byte $E8, $E0, $04, $90, $F5, $60, $AB, $06, $C3, $06, $B7, $06, $E1, $06, $8D, $FF
.byte $04, $8A, $48, $98, $48, $AD, $FF, $04, $0A, $A8, $90, $0A, $4A, $18, $A2, $46
.byte $20, $F8, $F4, $4C, $CE, $F4, $B9, $33, $F5, $18, $A2, $44, $20, $F8, $F4, $B9
.byte $34, $F5, $A2, $45, $20, $F8, $F4, $A9, $00, $A2, $46, $20, $F8, $F4, $90, $08
.byte $A9, $63, $85, $44, $85, $45, $85, $46, $A5, $34, $38, $E5, $44, $A5, $35, $E5
.byte $45, $A5, $36, $E5, $46, $B0, $0C, $A5, $44, $85, $34, $A5, $45, $85, $35, $A5
.byte $46, $85, $36, $68, $A8, $68, $AA, $60, $85, $0F, $B5, $00, $48, $29, $0F, $95


; F500 - bank 7
.byte $00, $A5, $0F, $29, $0F, $75, $00, $95, $00, $38, $E9, $0A, $90, $09, $95, $00
.byte $A5, $0F, $18, $69, $10, $85, $0F, $A5, $0F, $29, $F0, $85, $0F, $68, $29, $F0
.byte $18, $65, $0F, $85, $0F, $38, $E9, $A0, $90, $02, $85, $0F, $A5, $0F, $15, $00
.byte $95, $00, $60, $00, $00, $01, $00, $02, $00, $03, $00, $04, $00, $05, $00, $06
.byte $00, $07, $00, $08, $00, $09, $00, $10, $00, $20, $00, $30, $00, $40, $00, $50
.byte $00, $60, $00, $70, $00, $80, $00, $90, $00, $15, $00, $25, $00, $A5, $32, $D0
.byte $3B, $A5, $37, $A2, $0F, $9D, $E4, $04, $CA, $10, $FA, $A5, $38, $29, $F0, $8D
.byte $E5, $04, $8D, $E6, $04, $A9, $00, $20, $B8, $F6, $A9, $02, $20, $27, $F6, $AD
.byte $31, $00, $F0, $05, $A9, $01, $20, $B8, $F6, $A9, $00, $20, $27, $F6, $A9, $01
.byte $20, $27, $F6, $20, $F8, $F7, $A9, $04, $20, $27, $F6, $60, $A9, $55, $A0, $03
.byte $99, $EC, $04, $88, $10, $FA, $A9, $00, $A0, $03, $99, $F0, $04, $88, $10, $FA
.byte $A0, $00, $A9, $E0, $85, $15, $A9, $F0, $85, $16, $A5, $15, $99, $65, $04, $A5
.byte $16, $99, $85, $04, $E6, $15, $E6, $16, $C8, $C0, $0B, $90, $ED, $AD, $4B, $00
.byte $29, $60, $D0, $33, $A0, $00, $A9, $E0, $85, $15, $A9, $F0, $85, $16, $A5, $15
.byte $99, $77, $04, $A5, $16, $99, $97, $04, $E6, $15, $E6, $16, $C8, $C0, $0A, $90
.byte $ED, $A9, $EB, $8D, $81, $04, $A9, $EC, $8D, $82, $04, $A9, $FB, $8D, $A1, $04


; F600 - bank 7
.byte $A9, $FC, $8D, $A2, $04, $D0, $13, $A0, $00, $B9, $1B, $F6, $99, $77, $04, $B9
.byte $21, $F6, $99, $97, $04, $C8, $C0, $06, $90, $EF, $60, $C0, $C1, $C7, $DA, $DC
.byte $DE, $D0, $D1, $D7, $DB, $DD, $DF, $85, $00, $0A, $0A, $18, $65, $00, $A8, $B9
.byte $A0, $F6, $C9, $20, $85, $26, $B9, $9F, $F6, $85, $25, $4C, $3E, $F6, $B9, $A1
.byte $F6, $85, $0E, $C6, $0E, $4A, $08, $69, $00, $85, $0F, $B9, $A2, $F6, $85, $29
.byte $B9, $A3, $F6, $85, $2A, $A9, $00, $28, $90, $02, $A9, $FF, $85, $0C, $A4, $0F
.byte $88, $B1, $29, $24, $0C, $30, $09, $48, $4A, $4A, $4A, $4A, $20, $7C, $F6, $68
.byte $20, $7C, $F6, $A9, $00, $85, $0C, $C6, $0F, $D0, $E3, $60, $29, $0F, $F0, $04
.byte $A0, $00, $84, $0E, $A4, $0E, $F0, $07, $C6, $0E, $A9, $00, $4C, $92, $F6, $18
.byte $69, $EA, $A2, $00, $81, $25, $EE, $25, $00, $D0, $03, $EE, $26, $00, $60, $9C
.byte $04, $06, $44, $00, $76, $04, $01, $43, $00, $7C, $04, $06, $34, $00, $96, $04
.byte $04, $05, $05, $85, $04, $03, $41, $00, $85, $15, $29, $3F, $0A, $AA, $BD, $61
.byte $F7, $85, $25, $BD, $62, $F7, $85, $26, $A0, $00, $B1, $25, $F0, $00, $A9, $00
.byte $85, $00, $C8, $B1, $25, $AA, $C8, $B1, $25, $C9, $FF, $F0, $3F, $C9, $20, $B0
.byte $09

; f6e1
  STX $27
  STA $28
  DEC $00
  JMP $F6F0
  jsr @store_vm_add_h_to_range ; STA VMADDH
  STX VMADDL

.byte $C8, $B1, $25, $85, $16, $C8, $B1, $25, $24, $15, $10, $02, $A9, $20, $20, $20


; F700 - bank 7
.byte $F7, $24, $00, $10, $0D, $A2, $00, $81, $27, $E6, $27, $D0, $08, $E6, $28, $4C
.byte $15, $F7

; F712
STA VMDATAL ; Ppu_Data2007

.byte $CE, $16, $00, $D0, $DB, $F0, $B2, $20, $BF, $FC, $60
.byte $C9, $20, $90, $16, $C9, $30, $B0, $08, $38, $E9, $20, $AA, $BD, $52, $F7, $60
.byte $C9, $3A, $B0, $07, $38, $E9, $30, $18, $69, $EA, $60, $C9, $41, $B0, $08, $38
.byte $E9, $3A, $AA, $BD, $62, $F7, $60, $C9, $5B, $B0, $06, $38, $E9, $41, $18, $69
.byte $D0, $60, $00, $00, $00, $F5, $FA, $00, $00, $00, $F8, $F9, $00, $00, $F7, $F4
.byte $F6, $69, $F7, $93, $F7, $A0, $F7, $B1, $F7, $00, $66, $04, $02, $31, $50, $9A
.byte $04, $02, $31, $50, $7A, $04, $02, $48, $49, $91, $04, $08, $54, $49, $4D, $45
.byte $20, $31, $39, $39, $74, $04, $02, $50, $2D, $82, $04, $01, $30, $A2, $04, $01
.byte $30, $FF, $FF, $00, $66, $04, $02, $32, $50, $9A, $04, $02, $32, $50, $FF, $FF
.byte $00, $90, $04, $0B, $47, $41, $4D, $45, $20, $4F, $56, $45, $52, $20, $20, $FF
.byte $FF, $00

; title tile for mode select locations $f7b2
; .byte $8A, $2A, $0E
.byte $8A, $2A, $0E
.byte $4D, $4F, $44, $45, $20, $41, $20, $31, $50, $4C, $41, $59, $45, $52


; .byte $CA, $2A, $0E
.byte $CA, $2A, $0E
.byte $4D, $4F, $44, $45, $20, $41, $20, $32, $50, $4C, $41, $59, $45, $52

; .byte $0A, $2B, $0E
.byte $0A, $2B, $0E
.byte $4D, $4F, $44, $45, $20, $42, $20, $31, $50, $4C, $41, $59, $45, $52

; .byte $4A, $2B, $0E
.byte $4A, $2B, $0E
.byte $4D, $4F, $44, $45, $20, $42, $20, $32, $50, $4C, $41, $59, $45, $52
.byte $FF, $FF


.byte $A5, $32, $D0, $3F, $20, $03, $F8, $20


; F800 - bank 7
.byte $26, $F8, $60, $AD, $B4, $03, $85, $00, $A0, $00, $A2, $FD, $A5, $00, $38, $E9
.byte $08, $85, $00, $10, $07, $E8, $C9, $FC, $B0, $02, $A2, $00, $8A, $99, $69, $04
.byte $C8, $C0, $07, $90, $E5, $60, $A2, $06, $A9, $00, $9D, $89, $04, $CA, $10, $FA
.byte $A6, $40, $A9, $FC, $9D, $89, $04, $CA, $10, $FA, $60, $AD, $B4, $03, $4A, $4A
.byte $4A, $4A, $85, $23, $AD, $B5, $03, $4A, $4A, $4A, $4A, $85, $24, $A0, $00, $A5
.byte $23, $F0, $14, $A9, $EE, $99, $A5, $04, $A9, $FE, $99, $C5, $04, $C8, $CC, $23
.byte $00, $90, $F0, $C0, $0C, $B0, $0D, $A9, $00, $99, $A5, $04, $99, $C5, $04, $C8
.byte $C0, $0C, $90, $F3, $A0, $00, $A5, $24, $F0, $16, $A9, $ED, $99, $B7, $04, $A9
.byte $FD, $99, $D7, $04, $A9, $00, $C8, $CC, $24, $00, $90, $EE, $C0, $0C, $B0, $0D
.byte $A9, $00, $99, $B7, $04, $99, $D7, $04, $C8, $C0, $0C, $90, $F3, $60, $B5, $A2
.byte $29, $7F, $C9, $7F, $D0, $03, $4C, $7E, $FA, $AD, $03, $05, $C9, $08, $B0, $03
.byte $4C, $7E, $FA, $AE, $49, $00, $BC, $9A, $00, $B9, $84, $FA, $20, $EE, $FE, $BD
.byte $9A, $00, $0A, $A8, $B9, $00, $80, $85, $00, $B9, $01, $80, $85, $01, $B5, $A2
.byte $0A, $A8, $B1, $00, $85, $08, $C8, $B1, $00, $85, $09, $B5, $72, $18, $75, $8A
.byte $85, $0C, $B5, $7A, $75, $92, $85, $0D, $A5, $0C, $38, $E5, $DD, $85, $0C, $A5
.byte $0D, $E5, $DE, $85, $0D, $B5, $5A, $38, $E5, $DB, $85, $0A, $B5, $62, $E5, $DC


; F900 - bank 7
.byte $85, $0B, $A5, $0A, $18, $65, $39, $85, $0A, $A5, $0B, $69, $00, $85, $0B, $B5
.byte $A2, $4A, $29, $40, $85, $01, $18, $2A, $2A, $2A, $85, $00, $A9, $00, $85, $0E
.byte $A0, $00, $84, $0F, $A4, $0F, $B1, $08, $D0, $03, $4C, $7E, $FA, $C9, $FF, $D0
.byte $1C, $C8, $B1, $08, $48, $C8, $B1, $08, $48, $C8, $A5, $08, $85, $25, $A5, $09
.byte $85, $26, $68, $85, $09, $68, $85, $08, $84, $0E, $4C, $20, $F9, $C9, $FE, $D0
.byte $18, $C8, $B1, $08, $85, $02, $C8, $B1, $08, $85, $2B, $C8, $B1, $08, $85, $2C
.byte $C8, $A5, $0E, $09, $80, $85, $0E, $30, $31, $29, $FF, $10, $25, $49, $FF, $38
.byte $E9, $01, $85, $02, $A6, $49, $B5, $D2, $29, $3F, $C5, $02, $D0, $05, $C8, $C8
.byte $C8, $D0, $A3, $C8, $B1, $08, $48, $C8, $B1, $08, $85, $09, $68, $85, $08, $4C
.byte $20, $F9, $85, $02, $C8, $B1, $08, $C8, $85, $03, $A2, $00, $B1, $08, $95, $27
.byte $C8, $E8, $E0, $04, $90, $F6, $84, $0F, $A9, $00, $85, $15, $AE, $03, $05, $A5
.byte $15, $A8, $B1, $27, $9D, $01, $02, $A5, $03, $45, $01, $9D, $02, $02, $24, $0E
.byte $10, $07, $B1, $2B, $45, $01, $9D, $02, $02, $A5, $49, $C9, $01, $D0, $13, $A5
.byte $32, $D0, $06, $A5, $4B, $C9, $A0, $D0, $09, $BD, $02, $02, $18, $69, $02, $9D
.byte $02, $02, $A9, $00, $85, $05, $85, $07, $A5, $15, $0A, $A8, $B1, $29, $A6, $00
.byte $F0, $02, $49, $FF, $85, $04, $29, $FF, $10, $02, $C6, $05, $C8, $B1, $29, $85


; FA00 - bank 7
.byte $06, $10, $02, $C6, $07, $A2, $00, $B5, $04, $18, $75, $0A, $95, $04, $B5, $0B
.byte $75, $05, $95, $05, $E8, $E8, $E0, $04, $90, $ED, $E6, $15, $AE, $03, $05, $A5
.byte $04, $C9, $04, $90, $0C, $A5, $06, $C9, $2B, $90, $06, $A5, $05, $05, $07, $F0
.byte $07, $A9, $F8, $9D, $00, $02, $D0, $22, $A5, $04, $38, $E9, $04, $9D, $03, $02
.byte $A5, $06, $18, $69, $03, $49, $FF, $38, $E9, $10, $9D, $00, $02, $AD, $03, $05
.byte $38, $E9, $04, $8D, $03, $05, $C9, $04, $F0, $24, $C6, $02, $F0, $03, $4C, $AC
.byte $F9, $A5, $0E, $F0, $16, $29, $7F, $F0, $0E, $A5, $0E, $29, $7F, $85, $0F, $A5
.byte $25, $85, $08, $A5, $26, $85, $09, $A9, $00, $85, $0E, $4C, $24, $F9, $A9, $06
.byte $20, $EE, $FE, $60, $03, $03, $03, $03, $03, $03, $03, $03, $03, $03, $03, $03
.byte $03, $03, $03, $03, $03, $03, $04, $04, $04, $04, $04, $03, $03, $03, $48, $8A
.byte $48, $AD, $49, $00, $AE, $1E, $05, $9D, $1F, $05, $EE, $1E, $05, $68, $AA, $68
.byte $60, $AD, $1E, $05, $F0, $04, $C9, $02, $B0, $03, $4C, $03, $FB, $A9, $00, $85
.byte $15, $A9, $00, $85, $1D, $A6, $15, $BD, $1F, $05, $BC, $20, $05, $AA, $B5, $72
.byte $38, $F9, $72, $00, $85, $16, $B5, $7A, $F9, $7A, $00, $05, $16, $F0, $14, $30
.byte $12, $A6, $15, $BD, $20, $05, $48, $BD, $1F, $05, $9D, $20, $05, $68, $9D, $1F
.byte $05, $E6, $1D, $E6, $15, $A5, $15, $18, $69, $01, $CD, $1E, $05, $90, $C6, $A5


; FB00 - bank 7
.byte $1D, $D0, $BA, $CE, $1E, $05, $30, $0E, $AC, $1E, $05, $BE, $1F, $05, $86, $49
.byte $20, $1C, $FB, $4C, $03, $FB, $A9, $00, $8D, $1E, $05, $60, $A6, $49, $B5, $4A
.byte $29, $60, $C9, $40, $B0, $1F, $A9, $00, $95, $D2, $BD, $96, $03, $10, $08, $BC
.byte $9E, $03, $B9, $81, $FB, $95, $D2, $AC, $A7, $03, $BD, $96, $03, $29, $06, $F0
.byte $04, $C9, $02, $F0, $1C, $B5, $A2, $29, $7F, $C9, $7F, $F0, $03, $20, $9E, $F8
.byte $A6, $49, $B5, $4A, $C9, $02, $B0, $08, $BD, $96, $03, $29, $F9, $9D, $96, $03
.byte $60, $AC, $A7, $03, $B5, $9A, $48, $B9, $9A, $00, $95, $9A, $B5, $A2, $29, $7F
.byte $C9, $7F, $D0, $04, $68, $95, $9A, $60, $20, $45, $FB, $68, $A6, $49, $95, $9A
.byte $60, $01, $02, $04, $03, $05, $06, $07, $08, $09, $0A, $48, $29, $0F, $85, $24
.byte $68, $29, $F0, $85, $23, $A5, $40, $C9, $06, $B0, $3C, $A5, $41, $29, $0F, $18
.byte $65, $24, $85, $24, $38, $E9, $0A, $90, $09, $85, $24, $A5, $23, $18, $69, $10
.byte $85, $23, $A5, $41, $29, $F0, $18, $65, $23, $85, $23, $38, $E9, $A0, $90, $18
.byte $85, $23, $E6, $42, $A5, $42, $C9, $0A, $90, $0E, $E6, $40, $A9, $00, $85, $41
.byte $85, $42, $A9, $1B, $20, $E1, $FB, $60, $A5, $23, $05, $24, $85, $41, $4C, $D7
.byte $FB

; FBE1 - Play audio track in A as song
jmp @audio_hijack_1
  ; STA $0500
  nops 20

  ; LDA $0104
  ; PHA
  ; LDA #$05
  ; JSR $FEEE
  ; LDA $0500
  ; JSR $8000
  ; PLA
  ; JSR $FEEE
  ; RTS

.byte $AD, $04, $01, $48, $A9, $05, $20, $EE


; FC00 - bank 7
.byte $FE

; audio take-over 2
  ; JSR $8003
  JMP @audio_hijack_2
@audio_hijack_2_return:

.byte $68, $20, $EE, $FE, $60, $A9, $04, $20, $EE, $FE, $20, $E2
.byte $BF, $A9, $06, $20, $EE, $FE, $60, $A9, $04, $20, $EE, $FE, $20, $DF, $BF, $A9
.byte $06, $20, $EE, $FE, $60, $A9, $04, $20, $EE, $FE, $20, $E5, $BF, $A9, $06, $20
.byte $EE, $FE, $60, $AD, $04, $01, $48, $A9, $05, $20, $EE, $FE, $20, $00, $A5, $68
.byte $20, $EE, $FE, $60, $AD, $04, $01, $48, $A9, $05, $20, $EE, $FE, $20, $03, $A5
.byte $68, $08, $20, $EE, $FE, $28, $60, $AD, $04, $01, $48, $A9, $05, $20, $EE, $FE
.byte $20, $06, $A5, $68, $08, $20, $EE, $FE, $28, $60, $AD, $04, $01, $48, $A9, $06
.byte $20, $EE, $FE, $20, $70, $88, $68, $08, $20, $EE, $FE, $28, $60, $00, $00, $00

; FC80
  PHA
  LDA $0100
  PHA
  LDA #$00
  STA $0100

;   this enables and stores NMI
;   LDA $FF
;   ORA #$80
;   STA $FF
;   STA $2000 ; PpuControl_2000
  jslb do_critical_snes_nmi_chores, $a0
  jslb enable_nmi_and_store, $a0
  nops 1
  

: BNE :-

  ; fc95
  ; Disables Sprite and BG, for SNES
  ; We fblank

;   LDA $FE
;   AND #$E7
;   STA $FE
;   STA PpuMask_2001
  nops 1
  jslb reset_2a03_audio, $a0
  jslb disable_sprites_and_bg_and_store, $a0

  RTS

; various other PPU Mask Updates
; FC99 is jumping up to update the PPU Mask via above code

; ORA #$18 - Enables BG & Sprites
;   LDA $FE
;   ORA #$18
;   BNE $FC99
  jslb enable_bg_and_sprites_and_store, $a0
  nops 1
  RTS

; AND #$EF - Disable Sprites
;   LDA $FE
;   AND #$EF
;   JMP $FC99
  jslb disable_sprites_and_store, $a0
  nops 2
  RTS

; ORA #$10 - Enable Sprites
;   LDA $FE
;   ORA #$10
;   BNE $FC99
  jslb enable_sprites_and_store, $a0
  nops 1
  RTS

; AND #$F7 - Disable BG
;   LDA $FE
;   AND #$F7
;   JMP $FC99
  jslb disable_bg_and_store, $a0
  nops 2
  RTS

; ORA #$08 - enable BG
;   LDA $FE
;   ORA #$08
;   BNE $FC99
  jslb enable_bg_and_store, $a0
  nops 1
  RTS


; FCBF - reset the PPU Control and H/V Scroll
; we handle this in our SNES NMI routine
;   LDA PpuStatus_2002
;   LDA $FD
;   STA PpuScroll_2005
;   LDA $FC
;   STA PpuScroll_2005
;   LDA $FF
;   STA PpuControl_2000
  nops 18
  RTS


; FCD2
  STA $00
  STX $01
  STY $02
  LDA RDNMI ; PpuStatus_2002
  
  ; Sets VM increment to 1 and stores it
;   LDA $FF
;   AND #$FB
;   STA PpuControl_2000
;   STA $FF
  jslb set_vram_increment_to_1_and_store, $A0
  nops 5
  

  LDA $00
  jsr @store_vm_add_h_to_range ; STA VMADDH ; PpuAddr_2006
  LDY #$00
  STY VMADDL ; PpuAddr_2006

  LDX #$04
  CMP #$20
  BCS :+
  LDX $02
: LDY #$00
  LDA $01

: STA VMDATAL ; PpuData_2007
  DEY
  BNE :-
  DEX
  BNE :-

  ; zeroes out attributes, we'll need to port this later
  ; when we do attribute updates, for now we'll just write
  ; it to the VM
  LDY $02
  LDA $00
  CMP #$20
  BCC :++
  ADC #$02
  STA VMADDH ; PpuAddr_2006
  LDA #$C0
  STA VMADDL ; PpuAddr_2006
  LDX #$40
: STY VMDATAL ; PpuData_2007
  DEX
  BNE :-

: LDX $01
  RTS

; FD20 - bank 7
.byte $48, $8A, $84, $01, $18, $E5, $01, $AA, $68, $A0, $00, $84, $00, $91, $00, $88
.byte $D0, $FB, $C6, $01, $E8, $D0, $F6, $60, $20, $A2, $FD, $F0, $06, $20, $A2, $FD
.byte $20, $C4, $FD, $A2, $01, $B5, $F5, $A8, $55, $F7, $35, $F5, $95, $F5, $94, $F7
.byte $CA, $10, $F2, $60, $20, $A2, $FD, $A4, $F5, $A5, $F6, $48, $20, $A2, $FD, $68
.byte $C5, $F6, $D0, $F3, $C4, $F5, $D0, $EF, $F0, $D9, $20, $A2, $FD, $20, $C4, $FD
.byte $A4, $F5, $A5, $F6, $48, $20, $A2, $FD, $20, $C4, $FD, $68, $C5, $F6, $D0, $F0
.byte $C4, $F5, $D0, $EC, $F0, $BD, $20, $A2, $FD, $A5, $00, $85, $F7, $A5, $01, $85
.byte $F8, $A2, $03, $B5, $F5, $A8, $55, $F1, $35, $F5, $95, $F5, $94, $F1, $CA, $10
.byte $F2, $60

; input reading code
  jslb augment_input, $a0
  nops 29
;   LDX $FB
;   INX
;   STX $4016
;   DEX
;   STX $4016
;   LDX #$08
;   LDA $4016
;   LSR
;   ROL $F5
;   LSR
;   ROL $00
;   LDA $4017
;   LSR
;   ROL $F6
;   LSR
;   ROL $01
;   DEX
;   BNE $A7FDAE
  RTS

.byte $A5, $00, $05, $F5, $85, $F5, $A5, $01, $05, $F6, $85, $F6
.byte $60, $A9, $11, $A2, $10, $A0, $12, $86, $00, $D6, $00, $10, $05, $A9, $09, $95
.byte $00, $98, $AA, $B5, $00, $F0, $02, $D6, $00, $CA, $E4, $00, $D0, $F5, $60, $8A
.byte $48, $98, $48, $A2, $13, $A0, $02, $B5, $00, $29, $02, $85, $00, $B5, $01, $29


; FE00 - bank 7
.byte $02, $45, $00, $18, $F0, $01, $38, $76, $00, $E8, $88, $D0, $FA, $68, $A8, $68
.byte $AA, $A5, $13, $60

; FE14 0 configures sprite DMA
; we do this ourselves, no need to do anything here

;   LDA #$00
;   STA OamAddr_2003
;   LDA #$02
;   STA SpriteDma_4014
  nops 10
  RTS

.byte $A6
.byte $00, $A2, $FE, $EA, $CA, $D0, $FC, $C5, $00, $88, $D0, $F3, $60, $85, $0F, $A5
.byte $0F, $29, $F0, $F0, $18, $A0, $FA, $20, $1F, $FE, $20, $1F, $FE, $20, $1F, $FE
.byte $20, $1F, $FE, $A5, $0F, $38, $E9, $10, $85, $0F, $4C, $2F, $FE, $A5, $0F, $29
.byte $0F, $F0, $0A, $A0, $64, $20, $1F, $FE, $38, $E9, $01, $D0, $F6, $60

; fe5e - turn on NMI and store
  PHA
;   LDA $FF
;   ORA #$80
;   STA $FF
;   STA $2000
  jslb enable_nmi_and_store, $a0
  nops 5
  PLA
  RTS


; fe6a - turn off and store disabling vblank
  PHA
  jslb disable_nmi_and_store, $A0
  nops 5
;   LDA $FF
;   AND #$7F
;   STA $FF
;   STA PpuControl_2000
  PLA
  RTS


; fe76 -Set bank switch control registers
; Including Mirroring / PRG Bank and CHR Bank mode
; I'm pretty sure this is only ever set to $1F in DD
; but for other games you might need to do something for it.
   STA BANK_SWITCH_CTRL_REGS
;   SEI
  ; this is what ends up getting returned
  LDA PPU_CONTROL_STATE 
  jslb handle_mmc1_control_register, $a0
;   PHA
;   JSR $FE6A
;   LDA BANK_SWITCH_CTRL_REGS
;   STA $9FFF
;   LSR A
;   STA $9FFF
;   LSR A
;   STA $9FFF
;   LSR A
;   STA $9FFF
;   LSR A
;   STA $9FFF
;   PLA
;   STA PPU_CONTROL_STATE
;   STA PpuControl_2000
;   CLI
  RTS
  nops 9

@active_bank_rewrite:
  STA ACTIVE_NES_BANK
  SEI
  LDA PPU_CONTROL_STATE
  PHA
  JSR $FE6A
  LDA ACTIVE_NES_BANK
  AND #$0F
  INC
  ORA #$A0
  jmp @active_rewrite_return

; FE9E - Bankswap 0x0000 Vram (Sprites)
  STA BANK_SWITCH_CTRL_SPRITE_BANK
  SEI
  LDA $FF
  PHA
  JSR $FE6A
  LDA BANK_SWITCH_CTRL_SPRITE_BANK

;   STA $BFFF
;   LSR A
;   STA $BFFF
;   LSR A
;   STA $BFFF
;   LSR A
;   STA $BFFF
;   LSR A
;   STA $BFFF
  
  STA CHR_BANK_BANK_TO_LOAD
  jslb bankswitch_obj_chr_data, $a0
  nops 12

  PLA
;   STA $FF
;   STA $2000 ; PpuControl_2000
  jslb change_ppu_vblank_status, $a0
  NOP
  CLI
  RTS

; Bankswap 0x1000 Vram (BG Tiles)
  STA BANK_SWITCH_CTRL_BG_BANK
  SEI
  LDA $FF
  PHA
  JSR $FE6A
  LDA BANK_SWITCH_CTRL_BG_BANK
  
;   STA $DFFF
;   LSR
;   STA $DFFF
;   LSR
;   STA $DFFF
;   LSR
;   STA $DFFF
;   LSR
;   STA $DFFF
  nops 12
  STA BG_CHR_BANK_SWITCH
  jslb check_for_bg_chr_bankswap, $a0


  PLA
;   STA $FF
;   STA $2000
  jslb change_ppu_vblank_status, $a0
  NOP

  CLI
  RTS


   jmp @active_bank_rewrite
  ; STA ACTIVE_NES_BANK
  ; SEI
  ;  LDA PPU_CONTROL_STATE
  ;  PHA
  ; JSR $FE6A
  ; LDA ACTIVE_NES_BANK
  ; INC
  ; ORA #$A0
@active_rewrite_return:
  nops 12

;   STA $FFFF
;   LSR
;   STA $FFFF
;   LSR
;   STA $FFFF
;   LSR
;   STA $FFFF
;   LSR
;   STA $FFFF

  PHA
  PLB

  STA BANK_SWITCH_DB
  LDA #<@bank_switch_jump
  STA BANK_SWITCH_LB
  LDA #>@bank_switch_jump
  STA BANK_SWITCH_HB
  JML (BANK_SWITCH_LB)

@bank_switch_jump: 
  PLA
  
;   STA $FF
;   STA $2000
  jslb change_ppu_vblank_status, $a0
  nops 1

  ;CLI
  RTS

; FF16 - the NES NMI routine
  BIT $0100
  BPL :++
  BVC :+
  JMP $E0FF
: JMP $E0C5
: BVC :+
  JMP $E0B1
: jslb disable_nmi_and_store, $a0
;   LDA $FF
;   AND #$7F
;   STA $FF
;   STA PpuControl_2000
  nops 4
  LDA RDNMI ; PpuStatus_2002
  PLA
  PLA
  PLA
  PLA
  PLA ; extra PLA for us because the Bank is there too
  STA $0100
  PLA
  RTS

; FF3D - Initialization Routine
  SEI
  LDA #$10
  nops 3 ; STA PpuControl_2000 set BG tile to $1000, we've handled this already
  STA PPU_CONTROL_STATE
  CLD
  ; this is "show background in leftmost 8 pixels"
  ; We do this by default.
  LDA #$06
  STA PPU_MASK_STATE
  nops 3 ; STA PpuMask_2001
  
  LDX #$02
: LDA RDNMI ; PpuStatus_2002
  BPL :-
  DEX
  BNE :-

  ; zero out these.
  STX $FD
  STX $FC
  STX $FB
  STX JOYSER0
  LDA #$FF
  STA $F9
  LDA #$40
  STA JOYSER1
  
; sound things, we handle this ourselves
; LDA #$0F
; STA ApuStatus_4015
  nops 5

; Stack setting, we put ours at 01FF ealier in init
;  LDX #$FF
;  TXS
  nops 3

  LDA #$1F
  JSR $FE76
  LDA #$C0
  STA $0100
  LDA #$50
  STA $0101
  LDA $0102
  CMP #$35
  BNE @ff9e
  LDA $0103
  CMP #$53
  BEQ @ff97
  CMP #$AC
  BNE @ff9e
  LDA #$53
  STA $0103
@ff97:
  JSR $FCBF
  CLI
  JMP $E165
@ff9e:
  LDA #$00
  LDX #$F8
  ; sta $0000,x gets optimized to a zp instruction
  ; so we need a NOP
: STA $0000,X
  nop
  DEX
  BNE :-
  LDA #$35
  STA $0102
  LDA #$AC
  STA $0103
  LDA #$00
  STA $FD
  STA $FC
  JMP $FF9A

@set_stack_to_1ff: ; 11 bytes
  setAXY16  
  LDX #$01FF
  TXS
  setAXY8
  JMP @return_from_stack_shenanigans

@store_vm_add_h_to_range:
  jslb store_vmaddh_to_proper_range, $a0
  RTS

@exit_from_interrupt:
  PLA
  TAY
  PLA
  TAX
  PLA
;   RTI
  jml return_from_nes_nmi
  
;.byte $00, $00, $00, $00, $00;, $00, $00, $00, $00, $00, $00, $00, $00, $00
.byte $00, $00, $00, $00, $4C, $E1, $FB, $4C, $9E, $F4, $4C, $8B
.byte $FB, $4C, $6A, $FC, $4C, $9E, $FA, $00, $EE, $F1, $FF, $EA, $EA, $EA, $4C, $3D
.byte $FF, $EA, $B1, $E0, $C5, $E0, $FF, $E0, $65, $E1, $16, $FF, $E8, $FF, $65, $E1
